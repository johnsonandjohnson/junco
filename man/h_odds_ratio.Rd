% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/odds_ratio.R
\name{h_odds_ratio}
\alias{h_odds_ratio}
\alias{or_glm}
\alias{or_clogit}
\alias{or_cmh}
\title{Helper functions for odds ratio estimation}
\usage{
or_glm(data, conf_level)

or_clogit(data, conf_level, method = "exact")

or_cmh(data, conf_level)
}
\arguments{
\item{data}{(`data.frame`)\cr data frame containing at least the variables `rsp` and `grp`, and optionally
  `strata` for [or_clogit()].
# New: pval here}

\item{conf_level}{(`numeric`)\cr confidence level for the confidence interval.}

\item{method}{(`string`)\cr whether to use the correct (`'exact'`) calculation in the conditional likelihood or one
of the approximations, or the CMH method. See [survival::clogit()] for details.}
}
\value{
A named `list` of elements `or_ci`, `n_tot` and `pval`.
}
\description{
`r lifecycle::badge('stable')`

Functions to calculate odds ratios in [s_odds_ratio_j()].
}
\section{Functions}{
\itemize{
\item \code{or_glm()}: Estimates the odds ratio based on [stats::glm()]. Note that there must be
exactly 2 groups in `data` as specified by the `grp` variable.

\item \code{or_clogit()}: Estimates the odds ratio based on [survival::clogit()]. This is done for
the whole data set including all groups, since the results are not the same as when doing
pairwise comparisons between the groups.

\item \code{or_cmh()}: Estimates the odds ratio based on CMH. Note that there must be
exactly 2 groups in `data` as specified by the `grp` variable.

}}
\examples{
# Data with 2 groups.
data <- data.frame(
  rsp = as.logical(c(1, 1, 0, 1, 0, 0, 1, 1)),
  grp = letters[c(1, 1, 1, 2, 2, 2, 1, 2)],
  strata = letters[c(1, 2, 1, 2, 2, 2, 1, 2)],
  stringsAsFactors = TRUE
)

# Odds ratio based on glm.
or_glm(data, conf_level = 0.95)

# Data with 3 groups.
data <- data.frame(
  rsp = as.logical(c(1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0)),
  grp = letters[c(1, 1, 1, 2, 2, 2, 3, 3, 3, 3, 1, 1, 1, 2, 2, 2, 3, 3, 3, 3)],
  strata = LETTERS[c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2)],
  stringsAsFactors = TRUE
)


# Odds ratio based on stratified estimation by conditional logistic regression.
or_clogit(data, conf_level = 0.95)

# Data with 2 groups.
set.seed(123)
data <- data.frame(
  rsp = as.logical(rbinom(n = 40, size = 1, prob = 0.5)),
  grp = letters[sample(1:2, size = 40, replace = TRUE)],
  strata = LETTERS[sample(1:2, size = 40, replace = TRUE)],
  stringsAsFactors = TRUE
)

# Odds ratio based on CMH.
or_cmh(data, conf_level = 0.95)

}
\seealso{
[odds_ratio]
}
