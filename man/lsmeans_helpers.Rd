% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/lsmeans.R
\name{lsmeans_helpers}
\alias{lsmeans_helpers}
\alias{h_get_emmeans_res}
\alias{h_get_average_visit_specs}
\alias{h_get_spec_visit_estimates}
\alias{h_get_single_visit_estimates}
\alias{h_get_relative_reduc_df}
\alias{h_single_visit_contrast_specs}
\alias{h_average_visit_contrast_specs}
\title{Helpers for Processing Least Square Means}
\usage{
h_get_emmeans_res(fit, vars, weights)

h_get_average_visit_specs(emmeans_res, vars, averages, fit)

h_get_spec_visit_estimates(emmeans_res, specs, conf_level, tests = FALSE, ...)

h_get_single_visit_estimates(emmeans_res, conf_level)

h_get_relative_reduc_df(estimates, vars)

h_single_visit_contrast_specs(emmeans_res, vars)

h_average_visit_contrast_specs(specs, averages)
}
\arguments{
\item{fit}{result of model fitting function, e.g. [mmrm::mmrm()] or [stats::lm()].}

\item{vars}{(named `list` of `string` or `character`)\cr specifying the variables in the `MMRM`.
  The following elements need to be included as character vectors and match corresponding columns
  in `data`:

  - `response`: the response variable.
  - `covariates`: the additional covariate terms (might also include interactions).
  - `id`: the subject ID variable.
  - `arm`: the treatment group variable (factor).
  - `visit`: the visit variable (factor).
  - `weights`: optional weights variable (if `NULL` or omitted then no weights will be used).

  Note that the main effects and interaction of `arm` and `visit` are by default
  included in the model.}

\item{weights}{(`string`)\cr argument from [emmeans::emmeans()], 'counterfactual' by default.}

\item{emmeans_res}{(`list`)\cr initial `emmeans` result from [h_get_emmeans_res()].}

\item{averages}{(`list`)\cr optional named list of visit levels which should be averaged
and reported along side the single visits.}

\item{specs}{(`list`)\cr list of least square means specifications, with
elements `coefs` (coefficient list) and `grid` (corresponding `data.frame`).}

\item{conf_level}{(`proportion`)\cr confidence level of the interval.}

\item{tests}{(`flag`)\cr whether to add test results to the estimates.}

\item{...}{additional arguments for [emmeans::contrast()].}

\item{estimates}{(`data.frame`)\cr single visit least square mean estimates.}
}
\description{
Helpers for Processing Least Square Means
}
\section{Functions}{
\itemize{
\item \code{h_get_emmeans_res()}: returns a list with
`object` (`emmGrid` object containing `emmeans` results) and `grid`
(`data.frame` containing the potential arm and the visit variables
together with the sample size `n` for each combination).

\item \code{h_get_average_visit_specs()}: constructs average of visits specifications.

\item \code{h_get_spec_visit_estimates()}: estimates least square means as a `data.frame`
given specifications.

\item \code{h_get_single_visit_estimates()}: estimates least square means for single visits.

\item \code{h_get_relative_reduc_df()}: constructs `data.frame` with
relative reduction vs. reference arm based on single visit estimates.

\item \code{h_single_visit_contrast_specs()}: constructs single visit contrast specifications.

\item \code{h_average_visit_contrast_specs()}: constructs average visits contrast specifications,
given the `specs` for single visit contrasts and the averages required.

}}
\note{
The difference here compared to the original [tern.mmrm::h_get_spec_visit_estimates()]
  function is that additional arguments for [emmeans::contrast()] can be passed via the
  Once this has been added to the `tern.mmrm` package then its functions can be used instead.
}
\keyword{internal}
