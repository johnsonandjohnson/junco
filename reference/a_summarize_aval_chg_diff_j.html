<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Analysis function 3-column presentation — a_summarize_aval_chg_diff_j • junco</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analysis function 3-column presentation — a_summarize_aval_chg_diff_j"><meta name="description" content="Analysis functions to produce a 1-row summary presented in
a 3-column layout in the columns: column 1: N, column 2: Value, column 3: change
In the difference columns, only 1 column will be presented : difference + CI
When ancova = `TRUE`, the presented statistics will be based on ANCOVA method (`s_summarize_ancova_j`).
mean and ci (both for Value (column 2) and Chg (column 3)) using statistic `lsmean_ci`
mean and ci for the difference column are based on same ANCOVA model using statistic `lsmean_diffci`
When ancova = `FALSE`, descriptive statistics will be used instead.
In the difference column, the 2-sample t-test will be used."><meta property="og:description" content="Analysis functions to produce a 1-row summary presented in
a 3-column layout in the columns: column 1: N, column 2: Value, column 3: change
In the difference columns, only 1 column will be presented : difference + CI
When ancova = `TRUE`, the presented statistics will be based on ANCOVA method (`s_summarize_ancova_j`).
mean and ci (both for Value (column 2) and Chg (column 3)) using statistic `lsmean_ci`
mean and ci for the difference column are based on same ANCOVA model using statistic `lsmean_diffci`
When ancova = `FALSE`, descriptive statistics will be used instead.
In the difference column, the 2-sample t-test will be used."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">junco</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/johnsonandjohnson/junco/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Analysis function 3-column presentation</h1>
      <small class="dont-index">Source: <a href="https://github.com/johnsonandjohnson/junco/blob/ci_cd/R/a_summarize_aval_chg_diff.R" class="external-link"><code>R/a_summarize_aval_chg_diff.R</code></a></small>
      <div class="d-none name"><code>a_summarize_aval_chg_diff_j.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Analysis functions to produce a 1-row summary presented in
a 3-column layout in the columns: column 1: N, column 2: Value, column 3: change<br>
In the difference columns, only 1 column will be presented : difference + CI<br>
When ancova = `TRUE`, the presented statistics will be based on ANCOVA method (`s_summarize_ancova_j`).<br>
mean and ci (both for Value (column 2) and Chg (column 3)) using statistic `lsmean_ci`<br>
mean and ci for the difference column are based on same ANCOVA model using statistic `lsmean_diffci`<br>
When ancova = `FALSE`, descriptive statistics will be used instead.<br>
In the difference column, the 2-sample t-test will be used.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">a_summarize_aval_chg_diff_j</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">.df_row</span>,</span>
<span>  <span class="va">.spl_context</span>,</span>
<span>  ancova <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  comp_btw_group <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ref_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">.N_col</span>,</span>
<span>  denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N"</span>, <span class="st">".N_col"</span><span class="op">)</span>,</span>
<span>  indatavar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  d <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>  interaction_y <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  interaction_item <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>arm <span class="op">=</span> <span class="st">"TRT01A"</span>, covariates <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  format_na_str <span class="op">=</span> <span class="st">""</span>,</span>
<span>  .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="st">"count_denom_frac"</span>, col23 <span class="op">=</span> <span class="st">"mean_ci_3d"</span>, coldiff <span class="op">=</span></span>
<span>    <span class="st">"meandiff_ci_3d"</span><span class="op">)</span>,</span>
<span>  .formats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="cn">NULL</span>, col23 <span class="op">=</span> <span class="st">"xx.dx (xx.dx, xx.dx)"</span>, coldiff <span class="op">=</span></span>
<span>    <span class="st">"xx.dx (xx.dx, xx.dx)"</span><span class="op">)</span>,</span>
<span>  .formats_fun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col1 <span class="op">=</span> <span class="va">jjcsformat_count_denom_fraction</span>, col23 <span class="op">=</span> <span class="va">jjcsformat_xx</span>,</span>
<span>    coldiff <span class="op">=</span> <span class="va">jjcsformat_xx</span><span class="op">)</span>,</span>
<span>  multivars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"AVAL"</span>, <span class="st">"CHG"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(`data.frame`)<br> data set containing all analysis variables.</p></dd>


<dt id="arg--df-row">.df_row<a class="anchor" aria-label="anchor" href="#arg--df-row"></a></dt>
<dd><p>(`data.frame`)<br> data frame across all of the columns for the given row split.</p></dd>


<dt id="arg--spl-context">.spl_context<a class="anchor" aria-label="anchor" href="#arg--spl-context"></a></dt>
<dd><p>(`data.frame`)<br> gives information about ancestor split states
that is passed by `rtables`.</p></dd>


<dt id="arg-ancova">ancova<a class="anchor" aria-label="anchor" href="#arg-ancova"></a></dt>
<dd><p>(`logical`)<br> If FALSE, only descriptive methods will be used. <br>
If TRUE Ancova methods will be used for each of the columns : AVAL, CHG, DIFF. <br></p></dd>


<dt id="arg-comp-btw-group">comp_btw_group<a class="anchor" aria-label="anchor" href="#arg-comp-btw-group"></a></dt>
<dd><p>(`logical`)<br> If TRUE,
<br> When ancova = FALSE, the estimate of between group difference (on CHG)
will be based upon a two-sample t-test. <br><br> When ancova = TRUE, the same ancova model will be used for the estimate of between group difference (on CHG).</p></dd>


<dt id="arg-ref-path">ref_path<a class="anchor" aria-label="anchor" href="#arg-ref-path"></a></dt>
<dd><p>(`character`)<br> global reference group specification, see [get_ref_info()].</p></dd>


<dt id="arg--n-col">.N_col<a class="anchor" aria-label="anchor" href="#arg--n-col"></a></dt>
<dd><p>(`integer`)<br> column-wise N (column count) for the full column being analyzed that is typically
passed by `rtables`.</p></dd>


<dt id="arg-denom">denom<a class="anchor" aria-label="anchor" href="#arg-denom"></a></dt>
<dd><p>(`string`)<br> choice of denominator for proportions. Options are:
  * `N`: number of records in this column/row split.
<br> There is no check in place that the current split only has one record per subject.
Users should be careful with this.
  * `.N_col`: number of records in this column intersection (based on alt_counts_df dataset)
  <br> (when alt_counts_df is a single record per subjects, this will match number of subjects)</p></dd>


<dt id="arg-indatavar">indatavar<a class="anchor" aria-label="anchor" href="#arg-indatavar"></a></dt>
<dd><p>(`string`)<br> If not null, variable name to extra subset
incoming df to non-missing values of this variable.</p></dd>


<dt id="arg-d">d<a class="anchor" aria-label="anchor" href="#arg-d"></a></dt>
<dd><p>(default = 1) <br> choice of Decimal precision.
Note that one extra precision will be added, as means are presented.
 <br> Options are:
  * numerical(1)
  * variable name containing information on the precision, this variable
  should be available on input dataset. The content of this variable should
  then be an integer.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>(`string`)<br> subject variable name.</p></dd>


<dt id="arg-interaction-y">interaction_y<a class="anchor" aria-label="anchor" href="#arg-interaction-y"></a></dt>
<dd><p>(`character`)<br> Will be passed onto the `tern` function `s_ancova`, when ancova = TRUE.</p></dd>


<dt id="arg-interaction-item">interaction_item<a class="anchor" aria-label="anchor" href="#arg-interaction-item"></a></dt>
<dd><p>(`character`)<br> Will be passed onto the `tern` function `s_ancova`, when ancova = TRUE.</p></dd>


<dt id="arg-conf-level">conf_level<a class="anchor" aria-label="anchor" href="#arg-conf-level"></a></dt>
<dd><p>(`proportion`)<br> Confidence level of the interval</p></dd>


<dt id="arg-variables">variables<a class="anchor" aria-label="anchor" href="#arg-variables"></a></dt>
<dd><p>(named list of strings)<br>
list of additional analysis variables, with expected elements:
   * arm (string)<br>
group variable, for which the covariate adjusted means of multiple groups will be summarized.
Specifically, the first level of arm variable is taken as the reference group.
   * covariates (character)<br>
a vector that can contain single variable names (such as 'X1'), and/or interaction terms indicated by 'X1 * X2'.</p></dd>


<dt id="arg-format-na-str">format_na_str<a class="anchor" aria-label="anchor" href="#arg-format-na-str"></a></dt>
<dd><p>(`string`)<br></p></dd>


<dt id="arg--stats">.stats<a class="anchor" aria-label="anchor" href="#arg--stats"></a></dt>
<dd><p>(named `list`)<br> column statistics to select for the table.
The following column names are to be used: `col1`, `col23`, `coldiff`.<br>
For `col1`, the following stats can be specified.<br>
For `col23`, only `mean_ci_3d` is available. When ancova=`TRUE` these are LS Means, otherwise, arithmetic means.<br>
For `coldiff`, only `meandiff_ci_3d` is available. When ancova=`TRUE` these
are LS difference in means, otherwise, difference in means based upon 2-sample t-test.<br></p></dd>


<dt id="arg--formats">.formats<a class="anchor" aria-label="anchor" href="#arg--formats"></a></dt>
<dd><p>(named `list`)<br> formats for the column statistics. `xx.d` style formats can be used.</p></dd>


<dt id="arg--formats-fun">.formats_fun<a class="anchor" aria-label="anchor" href="#arg--formats-fun"></a></dt>
<dd><p>(named `list`)<br> formatting functions for the column
statistics, to be applied after the conversion of `xx.d` style to the
appropriate precision.</p></dd>


<dt id="arg-multivars">multivars<a class="anchor" aria-label="anchor" href="#arg-multivars"></a></dt>
<dd><p>(`string(3)`)<br> Variables names to use in 3-col layout.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A function that can be used in an analyze function call</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See Description</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>s_summarize_ancova_j</p>
<p>Other Inclusion of ANCOVA Functions:
<code><a href="s_summarize_ancova_j.html">a_summarize_ancova_j</a>()</code>,
<code><a href="s_ancova_j.html">s_ancova_j</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ADEG</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  STUDYID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'DUMMY'</span>, <span class="st">'DUMMY'</span>, <span class="st">'DUMMY'</span>, <span class="st">'DUMMY'</span>, <span class="st">'DUMMY'</span>,</span></span>
<span class="r-in"><span>    <span class="st">'DUMMY'</span>, <span class="st">'DUMMY'</span>, <span class="st">'DUMMY'</span>, <span class="st">'DUMMY'</span>, <span class="st">'DUMMY'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  USUBJID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'XXXXX01'</span>, <span class="st">'XXXXX02'</span>, <span class="st">'XXXXX03'</span>, <span class="st">'XXXXX04'</span>, <span class="st">'XXXXX05'</span>,</span></span>
<span class="r-in"><span>    <span class="st">'XXXXX06'</span>, <span class="st">'XXXXX07'</span>, <span class="st">'XXXXX08'</span>, <span class="st">'XXXXX09'</span>, <span class="st">'XXXXX10'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  TRT01A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'ARMA'</span>, <span class="st">'ARMA'</span>, <span class="st">'ARMA'</span>, <span class="st">'ARMA'</span>, <span class="st">'ARMA'</span>, <span class="st">'Placebo'</span>,</span></span>
<span class="r-in"><span>    <span class="st">'Placebo'</span>, <span class="st">'Placebo'</span>, <span class="st">'ARMA'</span>, <span class="st">'ARMA'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  PARAM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'BP'</span>, <span class="st">'BP'</span>, <span class="st">'BP'</span>, <span class="st">'BP'</span>, <span class="st">'BP'</span>, <span class="st">'BP'</span>, <span class="st">'BP'</span>, <span class="st">'BP'</span>, <span class="st">'BP'</span>, <span class="st">'BP'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  AVISIT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'Visit 1'</span>, <span class="st">'Visit 1'</span>, <span class="st">'Visit 1'</span>, <span class="st">'Visit 1'</span>, <span class="st">'Visit 1'</span>,</span></span>
<span class="r-in"><span>    <span class="st">'Visit 1'</span>, <span class="st">'Visit 1'</span>, <span class="st">'Visit 1'</span>, <span class="st">'Visit 1'</span>, <span class="st">'Visit 1'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">56</span>, <span class="fl">78</span>, <span class="fl">67</span>, <span class="fl">87</span>, <span class="fl">88</span>, <span class="fl">93</span>, <span class="fl">39</span>, <span class="fl">87</span>, <span class="fl">65</span>, <span class="fl">55</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  CHG <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">9</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">6</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ADEG</span> <span class="op">&lt;-</span> <span class="va">ADEG</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    TRT01A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">TRT01A</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    STUDYID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">STUDYID</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ADEG</span><span class="op">$</span><span class="va">colspan_trt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">ADEG</span><span class="op">$</span><span class="va">TRT01A</span> <span class="op">==</span> <span class="st">'Placebo'</span>, <span class="st">' '</span>, <span class="st">'Active Study Agent'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Active Study Agent'</span>, <span class="st">' '</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ADEG</span><span class="op">$</span><span class="va">rrisk_header</span> <span class="op">&lt;-</span> <span class="st">'Risk Difference (%) (95% CI)'</span></span></span>
<span class="r-in"><span><span class="va">ADEG</span><span class="op">$</span><span class="va">rrisk_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">ADEG</span><span class="op">$</span><span class="va">TRT01A</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">'vs'</span>, <span class="st">'Placebo'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">colspan_trt_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="colspan_map.html">create_colspan_map</a></span><span class="op">(</span><span class="va">ADEG</span>,</span></span>
<span class="r-in"><span>  non_active_grp <span class="op">=</span> <span class="st">'Placebo'</span>,</span></span>
<span class="r-in"><span>  non_active_grp_span_lbl <span class="op">=</span> <span class="st">' '</span>,</span></span>
<span class="r-in"><span>  active_grp_span_lbl <span class="op">=</span> <span class="st">'Active Study Agent'</span>,</span></span>
<span class="r-in"><span>  colspan_var <span class="op">=</span> <span class="st">'colspan_trt'</span>,</span></span>
<span class="r-in"><span>  trt_var <span class="op">=</span> <span class="st">'TRT01A'</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ref_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'colspan_trt'</span>, <span class="st">' '</span>, <span class="st">'TRT01A'</span>, <span class="st">'Placebo'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu">basic_table</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="co">### first columns</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'colspan_trt'</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="fu">trim_levels_to_map</span><span class="op">(</span>map <span class="op">=</span> <span class="va">colspan_trt_map</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">'TRT01A'</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_rows_by</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'PARAM'</span>,</span></span>
<span class="r-in"><span>    label_pos <span class="op">=</span> <span class="st">'topleft'</span>,</span></span>
<span class="r-in"><span>    split_label <span class="op">=</span> <span class="st">'Blood Pressure'</span>,</span></span>
<span class="r-in"><span>    section_div <span class="op">=</span> <span class="st">' '</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="va">drop_split_levels</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_rows_by</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'AVISIT'</span>,</span></span>
<span class="r-in"><span>    label_pos <span class="op">=</span> <span class="st">'topleft'</span>,</span></span>
<span class="r-in"><span>    split_label <span class="op">=</span> <span class="st">'Study Visit'</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="va">drop_split_levels</span>,</span></span>
<span class="r-in"><span>    child_labels <span class="op">=</span> <span class="st">'hidden'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="co">## set up a 3 column split</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by_multivar</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AVAL'</span>, <span class="st">'AVAL'</span>, <span class="st">'CHG'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    varlabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'n/N (%)'</span>, <span class="st">'Mean (CI)'</span>, <span class="st">'CFB (CI)'</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">'rrisk_header'</span>, nested <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">'TRT01A'</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="fu">remove_split_levels</span><span class="op">(</span><span class="st">'Placebo'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    labels_var <span class="op">=</span> <span class="st">'rrisk_label'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="co">### difference columns : just 1 column &amp; analysis needs to be done on change</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by_multivar</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'CHG'</span><span class="op">)</span>, varlabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">' '</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="co"># the variable passed here in analyze is not used (STUDYID),</span></span></span>
<span class="r-in"><span>  <span class="co"># it is a dummy var passing, the function a_summarize_aval_chg_diff_j</span></span></span>
<span class="r-in"><span>  <span class="co"># grabs the required vars from cols_by_multivar calls</span></span></span>
<span class="r-in"><span>  <span class="fu">analyze</span><span class="op">(</span><span class="st">'STUDYID'</span>,</span></span>
<span class="r-in"><span>    afun <span class="op">=</span> <span class="va">a_summarize_aval_chg_diff_j</span>,</span></span>
<span class="r-in"><span>    extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      format_na_str <span class="op">=</span> <span class="st">'-'</span>, d <span class="op">=</span> <span class="fl">0</span>,</span></span>
<span class="r-in"><span>      ref_path <span class="op">=</span> <span class="va">ref_path</span>, variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>arm <span class="op">=</span> <span class="st">'TRT01A'</span>, covariates <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">build_table</span><span class="op">(</span><span class="va">lyt</span>, <span class="va">ADEG</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                  Active Study Agent                                                                          Risk Difference (%) (95% CI)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Blood Pressure                          ARMA                                                Placebo                                ARMA vs Placebo       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Study Visit      n/N (%)          Mean (CI)          CFB (CI)         n/N (%)          Mean (CI)            CFB (CI)                                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> —————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BP                                                                                                                                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Visit 1        7/7 (100.0%)   70.9 (58.2, 83.5)   2.6 (-0.8, 6.0)   3/3 (100.0%)   73.0 (-0.5, 146.5)   1.3 (-9.0, 11.7)         1.2 (-7.0, 9.5)       </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriel Becker, Ilse Augustyns, Paul Jenkins, Daniel Hofstaedter, Joseph Kovach, David Munoz Tord, Daniel Sabanes Bove, Ezequiel Anokian, Renfei Mao, Mrinal Das, Johnson &amp; Johnson Innovative Medicine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

