<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Dynamic tabulation of MMRM results with tables — summarize_mmrm • junco</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dynamic tabulation of MMRM results with tables — summarize_mmrm"><meta name="description" content="`r lifecycle::badge('stable')`
These functions can be used to produce tables for MMRM results, within
tables which are split by arms and visits. This is helpful when higher-level
row splits are needed (e.g. splits by parameter or subgroup)."><meta property="og:description" content="`r lifecycle::badge('stable')`
These functions can be used to produce tables for MMRM results, within
tables which are split by arms and visits. This is helpful when higher-level
row splits are needed (e.g. splits by parameter or subgroup)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">junco</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/johnsonandjohnson/junco/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Dynamic tabulation of MMRM results with tables</h1>
      <small class="dont-index">Source: <a href="https://github.com/johnsonandjohnson/junco/blob/main/R/summarize_mmrm.R" class="external-link"><code>R/summarize_mmrm.R</code></a></small>
      <div class="d-none name"><code>summarize_mmrm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>`r lifecycle::badge('stable')`</p>
<p>These functions can be used to produce tables for MMRM results, within
tables which are split by arms and visits. This is helpful when higher-level
row splits are needed (e.g. splits by parameter or subgroup).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">s_summarize_mmrm</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">.var</span>,</span>
<span>  <span class="va">variables</span>,</span>
<span>  <span class="va">ref_levels</span>,</span>
<span>  <span class="va">.spl_context</span>,</span>
<span>  alternative <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"two.sided"</span>, <span class="st">"less"</span>, <span class="st">"greater"</span><span class="op">)</span>,</span>
<span>  show_relative <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"reduction"</span>, <span class="st">"increase"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">a_summarize_mmrm</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">.var</span>,</span>
<span>  <span class="va">.spl_context</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  .stats <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .formats <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .indent_mods <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(`data.frame`)<br> data set containing all analysis variables.</p></dd>


<dt id="arg--var">.var<a class="anchor" aria-label="anchor" href="#arg--var"></a></dt>
<dd><p>(`string`)<br> single variable name that is passed by `rtables` when requested
by a statistics function.</p></dd>


<dt id="arg-variables">variables<a class="anchor" aria-label="anchor" href="#arg-variables"></a></dt>
<dd><p>(named `list` of `string`)<br> list of additional analysis variables.</p></dd>


<dt id="arg-ref-levels">ref_levels<a class="anchor" aria-label="anchor" href="#arg-ref-levels"></a></dt>
<dd><p>(`list`)<br> with `visit` and `arm` reference levels.</p></dd>


<dt id="arg--spl-context">.spl_context<a class="anchor" aria-label="anchor" href="#arg--spl-context"></a></dt>
<dd><p>(`data.frame`)<br> gives information about ancestor split states
that is passed by `rtables`.</p></dd>


<dt id="arg-alternative">alternative<a class="anchor" aria-label="anchor" href="#arg-alternative"></a></dt>
<dd><p>(`string`)<br> whether `two.sided`, or one-sided `less` or `greater` p-value
should be displayed.</p></dd>


<dt id="arg-show-relative">show_relative<a class="anchor" aria-label="anchor" href="#arg-show-relative"></a></dt>
<dd><p>should the 'reduction' (`control - treatment`, default) or the 'increase'
(`treatment - control`) be shown for the relative change from baseline?</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>eventually passed to [fit_mmrm_j()] via [h_summarize_mmrm()].</p></dd>


<dt id="arg--stats">.stats<a class="anchor" aria-label="anchor" href="#arg--stats"></a></dt>
<dd><p>(`character`)<br> statistics to select for the table.</p></dd>


<dt id="arg--formats">.formats<a class="anchor" aria-label="anchor" href="#arg--formats"></a></dt>
<dd><p>(named `character` or `list`)<br> formats for the statistics. See Details in `analyze_vars` for more
information on the `'auto'` setting.</p></dd>


<dt id="arg--labels">.labels<a class="anchor" aria-label="anchor" href="#arg--labels"></a></dt>
<dd><p>(named `character`)<br> labels for the statistics (without indent).</p></dd>


<dt id="arg--indent-mods">.indent_mods<a class="anchor" aria-label="anchor" href="#arg--indent-mods"></a></dt>
<dd><p>(named `integer`)<br> indent modifiers for the labels. Defaults to 0, which corresponds to the
unmodified default behavior. Can be negative.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>* `a_summarize_mmrm()` returns the corresponding list with formatted [rtables::CellValue()].</p>
    </div>
    <div class="section level2">
    <h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a></h2>

<ul><li><p><code>s_summarize_mmrm()</code>: Statistics function which is extracting estimates,
not including any results when in the reference visit, and only showing LS mean
estimates when in the reference arm and not in reference visit. It uses
[s_lsmeans()] for the final processing.</p></li>
<li><p><code>a_summarize_mmrm()</code>: Formatted analysis function which is used as `afun`.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">longdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">DM</span><span class="op">$</span><span class="va">ID</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">DM</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">DM</span><span class="op">)</span> <span class="op">*</span> <span class="fl">4</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  VISIT <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'V'</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>, each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">DM</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="va">DM</span>, by <span class="op">=</span> <span class="st">'ID'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">'VISIT'</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">'ARM'</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    vars <span class="op">=</span> <span class="st">'AVAL'</span>,</span></span>
<span class="r-in"><span>    afun <span class="op">=</span> <span class="va">a_summarize_mmrm</span>,</span></span>
<span class="r-in"><span>    na_str <span class="op">=</span> <span class="fu">tern</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/default_na_str.html" class="external-link">default_na_str</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    show_labels <span class="op">=</span> <span class="st">"hidden"</span>,</span></span>
<span class="r-in"><span>    extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'AGE'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>        id <span class="op">=</span> <span class="st">'ID'</span>,</span></span>
<span class="r-in"><span>        arm <span class="op">=</span> <span class="st">'ARM'</span>,</span></span>
<span class="r-in"><span>        visit <span class="op">=</span> <span class="st">'VISIT'</span></span></span>
<span class="r-in"><span>      <span class="op">)</span>,</span></span>
<span class="r-in"><span>      conf_level <span class="op">=</span> <span class="fl">0.9</span>,</span></span>
<span class="r-in"><span>      cor_struct <span class="op">=</span> <span class="st">'toeplitz'</span>,</span></span>
<span class="r-in"><span>      ref_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>VISIT <span class="op">=</span> <span class="st">'V0'</span>, ARM <span class="op">=</span> <span class="st">'B: Placebo'</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">longdat</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/prune_table.html" class="external-link">prune_table</a></span><span class="op">(</span><span class="va">all_zero</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                   A: Drug X                B: Placebo             C: Combination    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> V1                                                                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n                                                  121                      106                      129          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Adjusted Mean (SE)                            0.081 (0.090)            -0.139 (0.096)           0.104 (0.087)     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Adjusted Mean 90% CI                       (-0.066, 0.229)          (-0.297, 0.019)          (-0.039, 0.247)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Adjusted Mean (90% CI)                  0.081 (-0.066, 0.229)    -0.139 (-0.297, 0.019)   0.104 (-0.039, 0.247) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Difference in Adjusted Means (SE)             0.220 (0.132)                                     0.243 (0.130)     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Difference in Adjusted Means 90% CI         (0.004, 0.437)                                    (0.030, 0.457)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Difference in Adjusted Means (90% CI)    0.220 (0.004, 0.437)                              0.243 (0.030, 0.457) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Relative Reduction (%)                          158.6%                                            175.1%        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2-sided p-value                                 0.094                                             0.061         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> V2                                                                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n                                                  121                      106                      129          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Adjusted Mean (SE)                            -0.079 (0.090)           -0.124 (0.096)           0.076 (0.087)     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Adjusted Mean 90% CI                       (-0.226, 0.069)          (-0.282, 0.034)          (-0.067, 0.219)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Adjusted Mean (90% CI)                  -0.079 (-0.226, 0.069)   -0.124 (-0.282, 0.034)   0.076 (-0.067, 0.219) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Difference in Adjusted Means (SE)             0.046 (0.132)                                     0.200 (0.130)     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Difference in Adjusted Means 90% CI        (-0.171, 0.262)                                   (-0.013, 0.413)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Difference in Adjusted Means (90% CI)   0.046 (-0.171, 0.262)                             0.200 (-0.013, 0.413) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Relative Reduction (%)                          36.8%                                             161.0%        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2-sided p-value                                 0.728                                             0.123         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> V3                                                                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n                                                  121                      106                      129          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Adjusted Mean (SE)                            0.060 (0.090)            0.101 (0.096)            0.110 (0.087)     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Adjusted Mean 90% CI                       (-0.088, 0.208)          (-0.057, 0.259)          (-0.033, 0.253)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Adjusted Mean (90% CI)                  0.060 (-0.088, 0.208)    0.101 (-0.057, 0.259)    0.110 (-0.033, 0.253) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Difference in Adjusted Means (SE)             -0.041 (0.132)                                    0.009 (0.130)     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Difference in Adjusted Means 90% CI        (-0.257, 0.176)                                   (-0.204, 0.223)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Difference in Adjusted Means (90% CI)   -0.041 (-0.257, 0.176)                            0.009 (-0.204, 0.223) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Relative Reduction (%)                          40.3%                                             -9.1%         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2-sided p-value                                 0.757                                             0.943         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> V4                                                                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   n                                                  121                      106                      129          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Adjusted Mean (SE)                            0.113 (0.090)            -0.133 (0.096)           -0.022 (0.087)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Adjusted Mean 90% CI                       (-0.035, 0.260)          (-0.291, 0.025)          (-0.165, 0.121)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Adjusted Mean (90% CI)                  0.113 (-0.035, 0.260)    -0.133 (-0.291, 0.025)   -0.022 (-0.165, 0.121)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Difference in Adjusted Means (SE)             0.245 (0.132)                                     0.111 (0.130)     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Difference in Adjusted Means 90% CI         (0.029, 0.462)                                   (-0.103, 0.324)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Difference in Adjusted Means (90% CI)    0.245 (0.029, 0.462)                             0.111 (-0.103, 0.324) </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Relative Reduction (%)                          184.9%                                            83.5%         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2-sided p-value                                 0.062                                             0.393         </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriel Becker, Ilse Augustyns, Paul Jenkins, Daniel Hofstaedter, Joseph Kovach, David Munoz Tord, Daniel Sabanes Bove, Ezequiel Anokian, Renfei Mao, Mrinal Das, Johnson &amp; Johnson Innovative Medicine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

