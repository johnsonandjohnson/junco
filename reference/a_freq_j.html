<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Analysis/statistical function for count and percentage in core columns + (optional) relative risk columns — a_freq_j • junco</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Analysis/statistical function for count and percentage in core columns + (optional) relative risk columns — a_freq_j"><meta name="description" content="Analysis/statistical function for count and percentage in core columns
+ (optional) relative risk columns"><meta property="og:description" content="Analysis/statistical function for count and percentage in core columns
+ (optional) relative risk columns"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">junco</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/johnsonandjohnson/junco/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Analysis/statistical function for count and percentage in core columns + (optional) relative risk columns</h1>
      <small class="dont-index">Source: <a href="https://github.com/johnsonandjohnson/junco/blob/main/R/a_freq_j.R" class="external-link"><code>R/a_freq_j.R</code></a></small>
      <div class="d-none name"><code>a_freq_j.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Analysis/statistical function for count and percentage in core columns
+ (optional) relative risk columns</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">s_freq_j</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">.var</span>,</span>
<span>  <span class="va">.df_row</span>,</span>
<span>  val <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drop_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  excl_levels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">alt_df</span>,</span>
<span>  <span class="va">parent_df</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>  denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n_df"</span>, <span class="st">"n_altdf"</span>, <span class="st">"N_col"</span>, <span class="st">"n_rowdf"</span>, <span class="st">"n_parentdf"</span><span class="op">)</span>,</span>
<span>  <span class="va">.N_col</span>,</span>
<span>  countsource <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"df"</span>, <span class="st">"altdf"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">a_freq_j</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  labelstr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .var <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  val <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drop_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  excl_levels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_levels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  new_levels_after <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  addstr2levs <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">.df_row</span>,</span>
<span>  <span class="va">.spl_context</span>,</span>
<span>  <span class="va">.N_col</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>  denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"N_col"</span>, <span class="st">"n_df"</span>, <span class="st">"n_altdf"</span>, <span class="st">"N_colgroup"</span>, <span class="st">"n_rowdf"</span>, <span class="st">"n_parentdf"</span><span class="op">)</span>,</span>
<span>  riskdiff <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ref_path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>strata <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  conf_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"wald"</span>, <span class="st">"waldcc"</span>, <span class="st">"cmh"</span>, <span class="st">"ha"</span>, <span class="st">"newcombe"</span>, <span class="st">"newcombecc"</span>, <span class="st">"strat_newcombe"</span>,</span>
<span>    <span class="st">"strat_newcombecc"</span><span class="op">)</span>,</span>
<span>  weights_method <span class="op">=</span> <span class="st">"cmh"</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label_fstr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label_map <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .alt_df_full <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  denom_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_unique_denom_fraction"</span><span class="op">)</span>,</span>
<span>  .formats <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .indent_mods <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na_str <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  .labels_n <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extrablankline <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  extrablanklineafter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  restr_columns <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  colgroup <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  countsource <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"df"</span>, <span class="st">"altdf"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(`data.frame`)<br> data set containing all analysis variables.</p></dd>


<dt id="arg--var">.var<a class="anchor" aria-label="anchor" href="#arg--var"></a></dt>
<dd><p>(`string`)<br> single variable name that is passed by `rtables` when requested
by a statistics function.</p></dd>


<dt id="arg--df-row">.df_row<a class="anchor" aria-label="anchor" href="#arg--df-row"></a></dt>
<dd><p>(`data.frame`)<br> data frame across all of the columns for the given row split.</p></dd>


<dt id="arg-val">val<a class="anchor" aria-label="anchor" href="#arg-val"></a></dt>
<dd><p>(`character` or NULL)<br>
When NULL, all levels of the incoming variable (variable used in the `analyze` call)
will be considered.<br>
When a single `string`, only that current level/value of the incoming variable
will be considered.<br>
When multiple levels, only those levels/values of the incoming variable
will be considered.<br>
When no values are observed (eg zero row input df),
a row with row-label `No data reported` will be included in the table.</p></dd>


<dt id="arg-drop-levels">drop_levels<a class="anchor" aria-label="anchor" href="#arg-drop-levels"></a></dt>
<dd><p>(`logical`)<br> If `TRUE` non-observed levels
(based upon .df_row) will not be included.<br>
Cannot be used together with `val`.</p></dd>


<dt id="arg-excl-levels">excl_levels<a class="anchor" aria-label="anchor" href="#arg-excl-levels"></a></dt>
<dd><p>(`character` or NULL)<br>
When NULL, no levels of the incoming variable (variable used in the `analyze` call)
will be excluded.<br>
When multiple levels, those levels/values of the incoming variable
will be excluded.<br>
Cannot be used together with `val`.</p></dd>


<dt id="arg-alt-df">alt_df<a class="anchor" aria-label="anchor" href="#arg-alt-df"></a></dt>
<dd><p>(`dataframe`)<br> Will be derived based upon alt_df_full and denom_by within a_freq_j.</p></dd>


<dt id="arg-parent-df">parent_df<a class="anchor" aria-label="anchor" href="#arg-parent-df"></a></dt>
<dd><p>(`dataframe`)<br> Will be derived within a_freq_j based
upon the input dataframe that goes into build_table (df) and denom_by.<br>
It is a data frame in the higher row-space than the current input df
(which underwent row-splitting by the rtables splitting machinery).</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>(`string`)<br> subject variable name.</p></dd>


<dt id="arg-denom">denom<a class="anchor" aria-label="anchor" href="#arg-denom"></a></dt>
<dd><p>(`string`)<br>
One of <br></p><ul><li><p><strong>N_col</strong> Column count, <br></p></li>
<li><p><strong>n_df</strong> Number of patients (based upon the main input dataframe `df`),<br></p></li>
<li><p><strong>n_altdf</strong> Number of patients from the secondary dataframe (`.alt_df_full`),<br>
Note that argument `denom_by` will perform a row-split on the `.alt_df_full` dataframe.<br>
It is a requirement that variables specified in `denom_by` are part of the row split specifications. <br></p></li>
<li><p><strong>N_colgroup</strong> Number of patients from the column group variable
(note that this is based upon the input .alt_df_full dataframe).<br>
Note that the argument `colgroup` (column variable) needs to be provided,
as it cannot be retrieved directly from the column layout definition.</p></li>
<li><p><strong>n_rowdf</strong> Number of patients from the current row-level dataframe
(`.row_df` from the rtables splitting machinery).<br></p></li>
<li><p><strong>n_parentdf</strong> Number of patients from a higher row-level split than the current split.<br>
This higher row-level split is specified in the argument `denom_by`.<br></p></li>
</ul></dd>


<dt id="arg--n-col">.N_col<a class="anchor" aria-label="anchor" href="#arg--n-col"></a></dt>
<dd><p>(`integer`)<br> column-wise N (column count) for the full column being analyzed that is typically
passed by `rtables`.</p></dd>


<dt id="arg-countsource">countsource<a class="anchor" aria-label="anchor" href="#arg-countsource"></a></dt>
<dd><p>Either `df` or `alt_df`.<br>
When `alt_df` the counts will be based upon the alternative dataframe `alt_df`.<br>
This is useful for subgroup processing,
to present counts of subjects in a subgroup from the alternative dataframe.</p></dd>


<dt id="arg-labelstr">labelstr<a class="anchor" aria-label="anchor" href="#arg-labelstr"></a></dt>
<dd><p>An argument to ensure this function can be used
as a `cfun` in a `summarize_row_groups` call.<br>
It is recommended not to utilize this argument for other purposes.<br>
The label argument could be used instead (if `val` is a single string)<br>
An another approach could be to utilize the `label_map` argument
to control the row labels of the incoming analysis variable.</p></dd>


<dt id="arg-new-levels">new_levels<a class="anchor" aria-label="anchor" href="#arg-new-levels"></a></dt>
<dd><p>(list(2) or NULL)<br> List of length 2.<br>
First element : names of the new levels<br>
Second element: list with values of the new levels.<br></p></dd>


<dt id="arg-new-levels-after">new_levels_after<a class="anchor" aria-label="anchor" href="#arg-new-levels-after"></a></dt>
<dd><p>(`logical`)<br> If `TRUE` new levels will be added after last level.</p></dd>


<dt id="arg-addstr-levs">addstr2levs<a class="anchor" aria-label="anchor" href="#arg-addstr-levs"></a></dt>
<dd><p>string, if not NULL will be appended to the rowlabel for that level,
eg to add ",n (percent)" at the end of the rowlabels</p></dd>


<dt id="arg--spl-context">.spl_context<a class="anchor" aria-label="anchor" href="#arg--spl-context"></a></dt>
<dd><p>(`data.frame`)<br> gives information about ancestor split states
that is passed by `rtables`.</p></dd>


<dt id="arg-riskdiff">riskdiff<a class="anchor" aria-label="anchor" href="#arg-riskdiff"></a></dt>
<dd><p>(`logical`)<br>
When `TRUE`, risk difference calculations will be performed and
presented (if required risk difference column splits are included).<br>
When `FALSE`, risk difference columns will remain blank
(if required risk difference column splits are included).</p></dd>


<dt id="arg-ref-path">ref_path<a class="anchor" aria-label="anchor" href="#arg-ref-path"></a></dt>
<dd><p>(`string`)<br> Column path specifications for
the control group for the relative risk derivation.</p></dd>


<dt id="arg-variables">variables<a class="anchor" aria-label="anchor" href="#arg-variables"></a></dt>
<dd><p>Will be passed onto the relative risk function
(internal function s_rel_risk_val_j), which is based upon [tern::s_proportion_diff()].<br>
See `?tern::s_proportion_diff` for details.</p></dd>


<dt id="arg-conf-level">conf_level<a class="anchor" aria-label="anchor" href="#arg-conf-level"></a></dt>
<dd><p>(`proportion`)<br> confidence level of the interval.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Will be passed onto the relative risk function (internal function s_rel_risk_val_j).<br></p></dd>


<dt id="arg-weights-method">weights_method<a class="anchor" aria-label="anchor" href="#arg-weights-method"></a></dt>
<dd><p>Will be passed onto the relative risk function (internal function s_rel_risk_val_j).<br></p></dd>


<dt id="arg-label">label<a class="anchor" aria-label="anchor" href="#arg-label"></a></dt>
<dd><p>(`string`)<br>
When `val`is a single `string`,
the row label to be shown on the output can be specified using this argument.<br>
When `val` is a `character vector`, the `label_map` argument can be specified
to control the row-labels.</p></dd>


<dt id="arg-label-fstr">label_fstr<a class="anchor" aria-label="anchor" href="#arg-label-fstr"></a></dt>
<dd><p>(`string`)<br>
a sprintf style format string.
It can contain up to one "%s" which takes the current split value and
generates the row/column label.<br>
It will be combined with the `labelstr` argument,
when utilizing this function as
a `cfun` in a `summarize_row_groups` call.<br>
It is recommended not to utilize this argument for other purposes.
The label argument could be used instead (if `val` is a single string)<br></p></dd>


<dt id="arg-label-map">label_map<a class="anchor" aria-label="anchor" href="#arg-label-map"></a></dt>
<dd><p>(`tibble`)<br>
A mapping tibble to translate levels from the incoming variable into
a different row label to be presented on the table.<br></p></dd>


<dt id="arg--alt-df-full">.alt_df_full<a class="anchor" aria-label="anchor" href="#arg--alt-df-full"></a></dt>
<dd><p>(`dataframe`)<br> Denominator dataset
for fraction and relative risk calculations.<br>
.alt_df_full is a crucial parameter for the relative risk calculations
if this parameter is not set to utilize `alt_counts_df`,
then the values in the relative risk columns might not be correct.<br>
Once the rtables PR is integrated, this argument gets populated by the rtables
split machinery (see [rtables::additional_fun_params]).</p></dd>


<dt id="arg-denom-by">denom_by<a class="anchor" aria-label="anchor" href="#arg-denom-by"></a></dt>
<dd><p>(`character`)<br> Variables from row-split
to be used in the denominator derivation.<br>
This controls both `denom = "n_parentdf"` and `denom = "n_altdf"`.<br>
When `denom = "n_altdf"`, the denominator is derived from `.alt_df_full`
in combination with `denom_by` argument</p></dd>


<dt id="arg--stats">.stats<a class="anchor" aria-label="anchor" href="#arg--stats"></a></dt>
<dd><p>(`character`)<br> statistics to select for the table.
See Value for list of available statistics.</p></dd>


<dt id="arg--formats">.formats<a class="anchor" aria-label="anchor" href="#arg--formats"></a></dt>
<dd><p>(named 'character' or 'list')<br>
formats for the statistics.</p></dd>


<dt id="arg--indent-mods">.indent_mods<a class="anchor" aria-label="anchor" href="#arg--indent-mods"></a></dt>
<dd><p>(named `integer`)<br> indent modifiers for the labels. Defaults to 0, which corresponds to the
unmodified default behavior. Can be negative.</p></dd>


<dt id="arg-na-str">na_str<a class="anchor" aria-label="anchor" href="#arg-na-str"></a></dt>
<dd><p>(`string`)<br> string used to replace all `NA` or empty values in the output.</p></dd>


<dt id="arg--labels-n">.labels_n<a class="anchor" aria-label="anchor" href="#arg--labels-n"></a></dt>
<dd><p>(named `character`)<br>
String to control row labels for the 'n'-statistics.<br>
Only useful when more than one 'n'-statistic is requested (rare situations only).</p></dd>


<dt id="arg-extrablankline">extrablankline<a class="anchor" aria-label="anchor" href="#arg-extrablankline"></a></dt>
<dd><p>(`logical`)<br>
When `TRUE`, an extra blank line will be added after the last value.<br>
Avoid using this in template scripts, use section_div = " " instead (once PR for rtables is available)<br></p></dd>


<dt id="arg-extrablanklineafter">extrablanklineafter<a class="anchor" aria-label="anchor" href="#arg-extrablanklineafter"></a></dt>
<dd><p>(`string`)<br>
When the row-label matches the string, an extra blank line will be added after
that value.</p></dd>


<dt id="arg-restr-columns">restr_columns<a class="anchor" aria-label="anchor" href="#arg-restr-columns"></a></dt>
<dd><p>`character`<br>
If not NULL, columns not defined in `restr_columns` will be blanked out.</p></dd>


<dt id="arg-colgroup">colgroup<a class="anchor" aria-label="anchor" href="#arg-colgroup"></a></dt>
<dd><p>The name of the column group variable that is used as source
for denominator calculation.<br>
Required to be specified when `denom = "N_colgroup"`.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>* `s_freq_j`: returns a list of following statistics<br></p><ul><li><p>n_df</p></li>
<li><p>n_rowdf</p></li>
<li><p>n_parentdf</p></li>
<li><p>n_altdf</p></li>
<li><p>denom</p></li>
<li><p>count</p></li>
<li><p>count_unique</p></li>
<li><p>count_unique_fraction</p></li>
<li><p>count_unique_denom_fraction</p></li>
</ul><p>* `a_freq_j`: returns a list of requested statistics with formatted `rtables::CellValue()`.<br>
Within the relative risk difference columns, the following stats are blanked out:</p><ul><li><p>any of the n-statistics (n_df, n_altdf, n_parentdf, n_rowdf, denom)</p></li>
<li><p>count</p></li>
<li><p>count_unique</p></li>
</ul><p>For the others (count_unique_fraction, count_unique_denom_fraction),
the statistic is replaced by the relative risk difference + confidence interval.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Attaching package: ‘dplyr’</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:stats’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     filter, lag</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> The following objects are masked from ‘package:base’:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>     intersect, setdiff, setequal, union</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="va">ex_adsl</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"SEX"</span>, <span class="st">"ARM"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">adae</span> <span class="op">&lt;-</span> <span class="va">ex_adae</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="st">"AEBODSYS"</span>, <span class="st">"AEDECOD"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">adae</span><span class="op">[[</span><span class="st">"TRTEMFL"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Y"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">trtvar</span> <span class="op">&lt;-</span> <span class="st">"ARM"</span></span></span>
<span class="r-in"><span><span class="va">ctrl_grp</span> <span class="op">&lt;-</span> <span class="st">"B: Placebo"</span></span></span>
<span class="r-in"><span><span class="va">adsl</span><span class="op">$</span><span class="va">colspan_trt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">ctrl_grp</span>, <span class="st">" "</span>, <span class="st">"Active Study Agent"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Active Study Agent"</span>, <span class="st">" "</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">adsl</span><span class="op">$</span><span class="va">rrisk_header</span> <span class="op">&lt;-</span> <span class="st">"Risk Difference (%) (95% CI)"</span></span></span>
<span class="r-in"><span><span class="va">adsl</span><span class="op">$</span><span class="va">rrisk_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"vs"</span>, <span class="va">ctrl_grp</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># join data together</span></span></span>
<span class="r-in"><span><span class="va">adae</span> <span class="op">&lt;-</span> <span class="va">adae</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(USUBJID)`</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">colspan_trt_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="colspan_map.html">create_colspan_map</a></span><span class="op">(</span><span class="va">adsl</span>,</span></span>
<span class="r-in"><span>  non_active_grp <span class="op">=</span> <span class="st">"B: Placebo"</span>,</span></span>
<span class="r-in"><span>  non_active_grp_span_lbl <span class="op">=</span> <span class="st">" "</span>,</span></span>
<span class="r-in"><span>  active_grp_span_lbl <span class="op">=</span> <span class="st">"Active Study Agent"</span>,</span></span>
<span class="r-in"><span>  colspan_var <span class="op">=</span> <span class="st">"colspan_trt"</span>,</span></span>
<span class="r-in"><span>  trt_var <span class="op">=</span> <span class="va">trtvar</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">ref_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"colspan_trt"</span>, <span class="st">" "</span>, <span class="va">trtvar</span>, <span class="va">ctrl_grp</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu">basic_table</span><span class="op">(</span>show_colcounts <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"colspan_trt"</span>, split_fun <span class="op">=</span> <span class="fu">trim_levels_to_map</span><span class="op">(</span>map <span class="op">=</span> <span class="va">colspan_trt_map</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="va">trtvar</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"rrisk_header"</span>, nested <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="va">trtvar</span>, labels_var <span class="op">=</span> <span class="st">"rrisk_label"</span>, split_fun <span class="op">=</span> <span class="fu">remove_split_levels</span><span class="op">(</span><span class="va">ctrl_grp</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyt1</span> <span class="op">&lt;-</span> <span class="va">lyt</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">analyze</span><span class="op">(</span><span class="st">"TRTEMFL"</span>,</span></span>
<span class="r-in"><span>    show_labels <span class="op">=</span> <span class="st">"hidden"</span>,</span></span>
<span class="r-in"><span>    afun <span class="op">=</span> <span class="va">a_freq_j</span>,</span></span>
<span class="r-in"><span>    extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      method <span class="op">=</span> <span class="st">"wald"</span>,</span></span>
<span class="r-in"><span>      .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_unique_denom_fraction"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      ref_path <span class="op">=</span> <span class="va">ref_path</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result1</span> <span class="op">&lt;-</span> <span class="fu">build_table</span><span class="op">(</span><span class="va">lyt1</span>, <span class="va">adae</span>, alt_counts_df <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result1</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            Active Study Agent                                          Risk Difference (%) (95% CI)             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        A: Drug X      C: Combination      B: Placebo      A: Drug X vs B: Placebo   C: Combination vs B: Placebo</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         (N=134)           (N=132)           (N=134)               (N=134)                     (N=132)           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Y   122/134 (91.0%)   120/132 (90.9%)   123/134 (91.8%)      -0.7 (-7.5, 6.0)             -0.9 (-7.6, 5.9)      </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># quick check for risk difference results using tern function stat_propdiff_ci</span></span></span>
<span class="r-in"><span><span class="co"># For Drug X vs Placebo</span></span></span>
<span class="r-in"><span><span class="va">x_drug_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">adae</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"A: Drug X"</span><span class="op">)</span><span class="op">[[</span><span class="st">"USUBJID"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">N_x_drug_x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">adsl</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"A: Drug X"</span><span class="op">)</span><span class="op">[[</span><span class="st">"USUBJID"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">y_placebo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">adae</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">ctrl_grp</span><span class="op">)</span><span class="op">[[</span><span class="st">"USUBJID"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">N_y_placebo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">adsl</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">ctrl_grp</span><span class="op">)</span><span class="op">[[</span><span class="st">"USUBJID"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">tern</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/stat_propdiff_ci.html" class="external-link">stat_propdiff_ci</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">x_drug_x</span>,</span></span>
<span class="r-in"><span>  N_x <span class="op">=</span> <span class="va">N_x_drug_x</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">y_placebo</span>,</span></span>
<span class="r-in"><span>  N_y <span class="op">=</span> <span class="va">N_y_placebo</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -0.7462687 -7.4525893  5.9600520</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For Combination vs Placebo</span></span></span>
<span class="r-in"><span><span class="va">x_combo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">adae</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"C: Combination"</span><span class="op">)</span><span class="op">[[</span><span class="st">"USUBJID"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">N_x_combo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">adsl</span>, <span class="va">adsl</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"C: Combination"</span><span class="op">)</span><span class="op">[[</span><span class="st">"USUBJID"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">tern</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/stat_propdiff_ci.html" class="external-link">stat_propdiff_ci</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">x_combo</span>,</span></span>
<span class="r-in"><span>  N_x <span class="op">=</span> <span class="va">N_x_combo</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">y_placebo</span>,</span></span>
<span class="r-in"><span>  N_y <span class="op">=</span> <span class="va">N_y_placebo</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [[1]]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -0.8819539 -7.6386167  5.8747089</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># example for subgroup AE table</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">extra_args_rr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  denom <span class="op">=</span> <span class="st">"n_altdf"</span>,</span></span>
<span class="r-in"><span>  denom_by <span class="op">=</span> <span class="st">"SEX"</span>,</span></span>
<span class="r-in"><span>  riskdiff <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_unique"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">extra_args_rr2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  denom <span class="op">=</span> <span class="st">"n_altdf"</span>,</span></span>
<span class="r-in"><span>  denom_by <span class="op">=</span> <span class="st">"SEX"</span>,</span></span>
<span class="r-in"><span>  riskdiff <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  ref_path <span class="op">=</span> <span class="va">ref_path</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"wald"</span>,</span></span>
<span class="r-in"><span>  .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_unique_denom_fraction"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  na_str <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lyt2</span> <span class="op">&lt;-</span> <span class="fu">basic_table</span><span class="op">(</span></span></span>
<span class="r-in"><span>  top_level_section_div <span class="op">=</span> <span class="st">" "</span>,</span></span>
<span class="r-in"><span>  colcount_format <span class="op">=</span> <span class="st">"N=xx"</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="co">## main columns</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"colspan_trt"</span>, split_fun <span class="op">=</span> <span class="fu">trim_levels_to_map</span><span class="op">(</span>map <span class="op">=</span> <span class="va">colspan_trt_map</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="va">trtvar</span>, show_colcounts <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="co">## risk diff columns, note nested = FALSE</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="st">"rrisk_header"</span>, nested <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_cols_by</span><span class="op">(</span><span class="va">trtvar</span>,</span></span>
<span class="r-in"><span>    labels_var <span class="op">=</span> <span class="st">"rrisk_label"</span>, split_fun <span class="op">=</span> <span class="fu">remove_split_levels</span><span class="op">(</span><span class="st">"B: Placebo"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    show_colcounts <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_rows_by</span><span class="op">(</span><span class="st">"SEX"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">summarize_row_groups</span><span class="op">(</span><span class="st">"SEX"</span>,</span></span>
<span class="r-in"><span>    cfun <span class="op">=</span> <span class="va">a_freq_j</span>,</span></span>
<span class="r-in"><span>    extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="va">extra_args_rr</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>label_fstr <span class="op">=</span> <span class="st">"Gender: %s"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_rows_by</span><span class="op">(</span><span class="st">"TRTEMFL"</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="fu">keep_split_levels</span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    indent_mod <span class="op">=</span> <span class="op">-</span><span class="fl">1L</span>,</span></span>
<span class="r-in"><span>    section_div <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">summarize_row_groups</span><span class="op">(</span><span class="st">"TRTEMFL"</span>,</span></span>
<span class="r-in"><span>    cfun <span class="op">=</span> <span class="va">a_freq_j</span>,</span></span>
<span class="r-in"><span>    extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="va">extra_args_rr2</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      label <span class="op">=</span></span></span>
<span class="r-in"><span>        <span class="st">"Subjects with &gt;=1 AE"</span>, extrablankline <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">split_rows_by</span><span class="op">(</span><span class="st">"AEBODSYS"</span>,</span></span>
<span class="r-in"><span>    split_label <span class="op">=</span> <span class="st">"System Organ Class"</span>,</span></span>
<span class="r-in"><span>    split_fun <span class="op">=</span> <span class="fu">trim_levels_in_group</span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    label_pos <span class="op">=</span> <span class="st">"topleft"</span>,</span></span>
<span class="r-in"><span>    section_div <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    nested <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">summarize_row_groups</span><span class="op">(</span><span class="st">"AEBODSYS"</span>,</span></span>
<span class="r-in"><span>    cfun <span class="op">=</span> <span class="va">a_freq_j</span>,</span></span>
<span class="r-in"><span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr2</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">analyze</span><span class="op">(</span><span class="st">"AEDECOD"</span>,</span></span>
<span class="r-in"><span>    afun <span class="op">=</span> <span class="va">a_freq_j</span>,</span></span>
<span class="r-in"><span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr2</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">result2</span> <span class="op">&lt;-</span> <span class="fu">build_table</span><span class="op">(</span><span class="va">lyt2</span>, <span class="va">adae</span>, alt_counts_df <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriel Becker, Ilse Augustyns, Paul Jenkins, Daniel Hofstaedter, Joseph Kovach, David Munoz Tord, Daniel Sabanes Bove, Ezequiel Anokian, Renfei Mao, Mrinal Das, Johnson &amp; Johnson Innovative Medicine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

