<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tabulation • junco</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tabulation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">junco</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/johnsonandjohnson/junco/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Tabulation</h1>
            
            <h4 data-toc-skip class="date">2025-06-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/johnsonandjohnson/junco/blob/main/vignettes/junco.Rmd" class="external-link"><code>vignettes/junco.Rmd</code></a></small>
      <div class="d-none name"><code>junco.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="junco-tabulation">
<code>junco</code> Tabulation<a class="anchor" aria-label="anchor" href="#junco-tabulation"></a>
</h2>
<p>The <code>junco</code> R package provides functions to create
analyses for clinical trials in <code>R</code>. It is considered as an
add-on/alternative to the <code>tern</code> package, which is the first
package available in the <code>NEST</code> framework for analysis
functions with main focus for clinical trials. The core functionality
for tabulation is built on the more general purpose <code>rtables</code>
package. New users should first begin by reading the <a href="https://insightsengineering.github.io/tern/latest-tag/articles/tern.html" class="external-link">“Introduction
to <code>tern</code>”</a> and <a href="https://insightsengineering.github.io/rtables/latest-release/articles/rtables.html" class="external-link">“Introduction
to <code>rtables</code>”</a> vignettes.</p>
<p>The packages used in this vignette are:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/insightsengineering/rtables" class="external-link">rtables</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://johnsonandjohnson.github.io/junco/" class="external-link">junco</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/tern/" class="external-link">tern</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>The datasets used in this vignette are:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="va">ex_adsl</span></span>
<span><span class="va">adae</span> <span class="op">&lt;-</span> <span class="va">ex_adae</span></span>
<span><span class="va">advs</span> <span class="op">&lt;-</span> <span class="va">ex_advs</span></span></code></pre></div>
<p>Some common data manipulation on/from these datasets, such as adding
extra variables and defining some tabulation settings, like treatment
variable, control group for the table.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">trtvar</span> <span class="op">&lt;-</span> <span class="st">"ARM"</span></span>
<span><span class="va">ctrl_grp</span> <span class="op">&lt;-</span> <span class="st">"B: Placebo"</span></span>
<span></span>
<span><span class="va">non_ctrl_grp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="va">ctrl_grp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl</span><span class="op">$</span><span class="va">colspan_trt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="va">ctrl_grp</span>, <span class="st">" "</span>, <span class="st">"Active Study Agent"</span><span class="op">)</span>,</span>
<span>  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Active Study Agent"</span>, <span class="st">" "</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl</span><span class="op">$</span><span class="va">rrisk_header</span> <span class="op">&lt;-</span> <span class="st">"Risk Difference (%) (95% CI)"</span></span>
<span><span class="va">adsl</span><span class="op">$</span><span class="va">rrisk_label</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">[[</span><span class="va">trtvar</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"vs"</span>, <span class="va">ctrl_grp</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">adsl</span><span class="op">$</span><span class="va">rrisk_header_vs</span> <span class="op">&lt;-</span> <span class="st">"Difference in Mean Change (95% CI)"</span></span>
<span></span>
<span><span class="co"># define colspan_trt_map</span></span>
<span><span class="va">colspan_trt_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/colspan_map.html">create_colspan_map</a></span><span class="op">(</span><span class="va">adsl</span>,</span>
<span>  non_active_grp <span class="op">=</span> <span class="va">ctrl_grp</span>,</span>
<span>  non_active_grp_span_lbl <span class="op">=</span> <span class="st">" "</span>,</span>
<span>  active_grp_span_lbl <span class="op">=</span> <span class="st">"Active Study Agent"</span>,</span>
<span>  colspan_var <span class="op">=</span> <span class="st">"colspan_trt"</span>,</span>
<span>  trt_var <span class="op">=</span> <span class="va">trtvar</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># define reference group specification</span></span>
<span><span class="va">ref_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"colspan_trt"</span>, <span class="st">" "</span>, <span class="va">trtvar</span>, <span class="va">ctrl_grp</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adae</span><span class="op">[[</span><span class="st">"TRTEMFL"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Y"</span></span>
<span></span>
<span><span class="co"># add adsl variables to adae</span></span>
<span><span class="va">adae</span> <span class="op">&lt;-</span> <span class="va">adae</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">adsl</span><span class="op">)</span> </span>
<span><span class="va">advs</span> <span class="op">&lt;-</span> <span class="va">advs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">adsl</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">advs</span><span class="op">[</span><span class="va">advs</span><span class="op">[[</span><span class="st">"ABLFL"</span><span class="op">]</span><span class="op">]</span> <span class="op">==</span> <span class="st">"Y"</span>, <span class="st">"CHG"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="junco-analysis-functions">
<code>junco</code> Analysis Functions<a class="anchor" aria-label="anchor" href="#junco-analysis-functions"></a>
</h2>
<p>The <code>junco</code> analysis functions are used in combination
with the <code>rtables</code> layout functions,
<code><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">rtables::analyze</a></code> and
<code><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">rtables::summarize_row_groups</a></code>, in the pipeline which
creates the <code>rtables</code> table. They apply some statistical
logic to the layout of the <code>rtables</code> table. The table layout
is materialized with the <code><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">rtables::build_table</a></code> function and
the data.</p>
<p>The <code>junco</code> analysis functions are functions that can be
applied as an <code>afun</code> in either <code><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">rtables::analyze</a></code>
or as a <code>cfun</code> in <code><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">rtables::summarize_row_groups</a></code>
function. This is a slightly different approach to <code>tern</code>,
where the table layout is constructed using <code>analyze</code>
functions, which are wrappers around <code><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">rtables::analyze</a></code>.</p>
<p>Just like <code>tern</code> analyze functions, the <code>junco</code>
analysis functions offer various methods useful from the perspective of
clinical trials and other statistical projects.</p>
<p>Examples of the <code>junco</code> analysis functions are
<code>a_freq_j</code>, <code>a_freq_subcol_j</code>,
<code>a_summarize_aval_chg_diff_j</code> or
<code>a_summarize_ex_j</code>.</p>
<p>A complete list of analysis functions can be found in <a href="../reference/index.html">the junco website functions
reference</a>.</p>
</div>
<div class="section level2">
<h2 id="tabulation-examples-using-a_freq_j">Tabulation Examples using <code>a_freq_j</code><a class="anchor" aria-label="anchor" href="#tabulation-examples-using-a_freq_j"></a>
</h2>
<p>We present an example usage of <code>a_freq_j</code> for the very
common AE table in clinical trials.</p>
<p>The standard table of adverse events is a summary by system organ
class and preferred term. For frequency counts by preferred term, if
there are multiple occurrences of the same AE in an individual we count
them only once.</p>
<p>With <code>junco</code> package, this table can be created with
several calls to the same <code>a_freq_j</code> function in a tabulation
pipeline using <code><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">rtables::analyze</a></code> and
<code><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">rtables::summarize_row_groups</a></code>.</p>
<p>In next paragraph, we’ll describe the difference versus using
<code>tern</code> package, for similar AE table. Differences in how to
define the layout as well as differences in the resulting table.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## extra args for a_freq_j controlling specification of</span></span>
<span><span class="co">## reference group, denominator used to calculate percentages,</span></span>
<span><span class="co">## and other details</span></span>
<span><span class="va">extra_args_rr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  denom <span class="op">=</span> <span class="st">"n_altdf"</span>,</span>
<span>  riskdiff <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  ref_path <span class="op">=</span> <span class="va">ref_path</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"wald"</span>,</span>
<span>  .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_unique_fraction"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Using <code>junco</code> analysis function <code>a_freq_j</code> we
define the layout, using 2 <code>analyze</code> calls (for overall
summary - TRTEMFL and preferred term - AEDECOD), and 1
<code>summarize_row_groups</code> call (for system organ class -
AEBODSYS)</p>
<p>Note that the same specifications, <code>extra_args_rr</code> can be
re-used in the first and second <code>analyze</code> call, as well as in
the in-between call to <code>summarize_row_groups</code>.</p>
<p>For the overall summary, we add as extra specification to restrict to
TRTEMFL = “Y” values and the label to show in the row.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span></span>
<span>  top_level_section_div <span class="op">=</span> <span class="st">" "</span>,</span>
<span>  colcount_format <span class="op">=</span> <span class="st">"N=xx"</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## main columns</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"colspan_trt"</span>, split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/trim_levels_to_map.html" class="external-link">trim_levels_to_map</a></span><span class="op">(</span>map <span class="op">=</span> <span class="va">colspan_trt_map</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>, show_colcounts <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## risk diff columns, note nested = FALSE</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"rrisk_header"</span>, nested <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>, labels_var <span class="op">=</span> <span class="st">"rrisk_label"</span>, split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">remove_split_levels</a></span><span class="op">(</span><span class="va">ctrl_grp</span><span class="op">)</span>,</span>
<span>    show_colcounts <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"TRTEMFL"</span>, afun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="va">extra_args_rr</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>val <span class="op">=</span> <span class="st">"Y"</span>, label <span class="op">=</span> <span class="st">"Number of subjects with AE"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>   </span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>,</span>
<span>    split_label <span class="op">=</span> <span class="st">"System Organ Class"</span>,</span>
<span>    split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">trim_levels_in_group</a></span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span>,</span>
<span>    label_pos <span class="op">=</span> <span class="st">"topleft"</span>,</span>
<span>    section_div <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">)</span>,</span>
<span>    nested <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>, cfun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"AEDECOD"</span>, afun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Now we just build and view the resulting table.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">lyt</span>, <span class="va">adae</span>, alt_counts_df <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   Active Study Agent                                                                            </span></span>
<span><span class="co">#&gt;                               A: Drug X    C: Combination   B: Placebo                 Risk Difference (%) (95% CI)             </span></span>
<span><span class="co">#&gt; System Organ Class              N=134          N=132           N=134      A: Drug X vs B: Placebo   C: Combination vs B: Placebo</span></span>
<span><span class="co">#&gt; ————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; Number of subjects with AE   122 (91.0%)    120 (90.9%)     123 (91.8%)      -0.7 (-7.5, 6.0)             -0.9 (-7.6, 5.9)      </span></span>
<span><span class="co">#&gt;                                                                                                                                 </span></span>
<span><span class="co">#&gt; cl A.1                       78 (58.2%)      89 (67.4%)     75 (56.0%)       2.2 (-9.6, 14.1)            11.5 (-0.1, 23.1)      </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.1              50 (37.3%)      63 (47.7%)     45 (33.6%)       3.7 (-7.7, 15.2)             14.1 (2.5, 25.8)      </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.2              48 (35.8%)      50 (37.9%)     48 (35.8%)       0.0 (-11.5, 11.5)            2.1 (-9.5, 13.7)      </span></span>
<span><span class="co">#&gt;                                                                                                                                 </span></span>
<span><span class="co">#&gt; cl B.1                       47 (35.1%)      43 (32.6%)     49 (36.6%)      -1.5 (-13.0, 10.0)           -4.0 (-15.4, 7.4)      </span></span>
<span><span class="co">#&gt;   dcd B.1.1.1.1              47 (35.1%)      43 (32.6%)     49 (36.6%)      -1.5 (-13.0, 10.0)           -4.0 (-15.4, 7.4)      </span></span>
<span><span class="co">#&gt;                                                                                                                                 </span></span>
<span><span class="co">#&gt; cl B.2                       79 (59.0%)      85 (64.4%)     74 (55.2%)       3.7 (-8.1, 15.6)             9.2 (-2.6, 20.9)      </span></span>
<span><span class="co">#&gt;   dcd B.2.1.2.1              49 (36.6%)      52 (39.4%)     44 (32.8%)       3.7 (-7.7, 15.1)             6.6 (-5.0, 18.1)      </span></span>
<span><span class="co">#&gt;   dcd B.2.2.3.1              48 (35.8%)      51 (38.6%)     54 (40.3%)       -4.5 (-16.1, 7.1)           -1.7 (-13.4, 10.1)     </span></span>
<span><span class="co">#&gt;                                                                                                                                 </span></span>
<span><span class="co">#&gt; cl C.1                       43 (32.1%)      43 (32.6%)     46 (34.3%)       -2.2 (-13.5, 9.0)           -1.8 (-13.1, 9.6)</span></span></code></pre></div>
<div class="section level3">
<h3 id="minor-differences-between-current-table-and-a-similar-table-using-tern-analyze-functions-">Minor differences between current table and a similar table using
<code>tern</code> analyze functions.<a class="anchor" aria-label="anchor" href="#minor-differences-between-current-table-and-a-similar-table-using-tern-analyze-functions-"></a>
</h3>
<p>Here is a similar table generated with the tern functions
(<code>summarize_occurrences</code> and <code>count_occurrences</code>),
as close as possible to our target AE table we produced before in
<code>tbl</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">lyt_tern</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span></span>
<span>  top_level_section_div <span class="op">=</span> <span class="st">" "</span>,</span>
<span>  colcount_format <span class="op">=</span> <span class="st">"N=xx"</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## main columns</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>, </span>
<span>    show_colcounts <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>    split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/add_riskdiff.html" class="external-link">add_riskdiff</a></span><span class="op">(</span>arm_x <span class="op">=</span> <span class="va">ctrl_grp</span>, arm_y <span class="op">=</span> <span class="va">non_ctrl_grp</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/summarize_num_patients.html" class="external-link">analyze_num_patients</a></span><span class="op">(</span></span>
<span>    vars <span class="op">=</span> <span class="st">"USUBJID"</span>,</span>
<span>    .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"unique"</span><span class="op">)</span>,</span>
<span>    .labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      unique <span class="op">=</span> <span class="st">"Total number of patients with at least one adverse event"</span></span>
<span>    <span class="op">)</span>, </span>
<span>    riskdiff <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  </span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>,</span>
<span>    split_label <span class="op">=</span> <span class="st">"System Organ Class"</span>,</span>
<span>    split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">trim_levels_in_group</a></span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span>,</span>
<span>    label_pos <span class="op">=</span> <span class="st">"topleft"</span>,</span>
<span>    section_div <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">)</span>,</span>
<span>    nested <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/count_occurrences.html" class="external-link">summarize_occurrences</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"AEBODSYS"</span>,</span>
<span>    denom <span class="op">=</span> <span class="st">"N_col"</span>,</span>
<span>    riskdiff <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_fraction"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/count_occurrences.html" class="external-link">count_occurrences</a></span><span class="op">(</span>vars <span class="op">=</span> <span class="st">"AEDECOD"</span>,  </span>
<span>    denom <span class="op">=</span> <span class="st">"N_col"</span>,</span>
<span>    riskdiff <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_fraction"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">tbl_tern</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">lyt_tern</span>, <span class="va">adae</span>, alt_counts_df <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl_tern</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                                                                                         Risk Difference (%) (95% CI)   Risk Difference (%) (95% CI) </span></span>
<span><span class="co">#&gt;                                                             A: Drug X    B: Placebo    C: Combination     B: Placebo vs. A: Drug X     B: Placebo vs. C: Combination</span></span>
<span><span class="co">#&gt; System Organ Class                                            N=134         N=134          N=132                   N=268                           N=266            </span></span>
<span><span class="co">#&gt; ————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; Total number of patients with at least one adverse event   122 (91.0%)   123 (91.8%)    120 (90.9%)           0.7 (-6.0 - 7.5)               0.9 (-5.9 - 7.6)       </span></span>
<span><span class="co">#&gt;                                                                                                                                                                     </span></span>
<span><span class="co">#&gt; cl A.1                                                     78 (58.2%)     75 (56%)       89 (67.4%)          -2.2 (-14.1 - 9.6)             -11.5 (-23.1 - 0.1)     </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.1                                            50 (37.3%)    45 (33.6%)      63 (47.7%)          -3.7 (-15.2 - 7.7)            -14.1 (-25.8 - -2.5)     </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.2                                            48 (35.8%)    48 (35.8%)      50 (37.9%)          0.0 (-11.5 - 11.5)             -2.1 (-13.7 - 9.5)      </span></span>
<span><span class="co">#&gt;                                                                                                                                                                     </span></span>
<span><span class="co">#&gt; cl B.1                                                     47 (35.1%)    49 (36.6%)      43 (32.6%)          1.5 (-10.0 - 13.0)              4.0 (-7.4 - 15.4)      </span></span>
<span><span class="co">#&gt;   dcd B.1.1.1.1                                            47 (35.1%)    49 (36.6%)      43 (32.6%)          1.5 (-10.0 - 13.0)              4.0 (-7.4 - 15.4)      </span></span>
<span><span class="co">#&gt;                                                                                                                                                                     </span></span>
<span><span class="co">#&gt; cl B.2                                                      79 (59%)     74 (55.2%)      85 (64.4%)          -3.7 (-15.6 - 8.1)             -9.2 (-20.9 - 2.6)      </span></span>
<span><span class="co">#&gt;   dcd B.2.1.2.1                                            49 (36.6%)    44 (32.8%)      52 (39.4%)          -3.7 (-15.1 - 7.7)             -6.6 (-18.1 - 5.0)      </span></span>
<span><span class="co">#&gt;   dcd B.2.2.3.1                                            48 (35.8%)    54 (40.3%)      51 (38.6%)          4.5 (-7.1 - 16.1)              1.7 (-10.1 - 13.4)      </span></span>
<span><span class="co">#&gt;                                                                                                                                                                     </span></span>
<span><span class="co">#&gt; cl C.1                                                     43 (32.1%)    46 (34.3%)      43 (32.6%)          2.2 (-9.0 - 13.5)               1.8 (-9.6 - 13.1)</span></span></code></pre></div>
<p>The main differences in the resulting table are</p>
<ul>
<li>the comparison against the reference group is reversed (ie B:
Placebo vs. A: Drug X instead of A: Drug X vs. B: Placebo).<br>
</li>
<li>the extra column spanner for active treatment group is not present
in the <code>tern</code> version, and cannot be added.</li>
</ul>
</div>
<div class="section level3">
<h3 id="a_freq_j-supports-various-methods-for-the-risk-difference-column-">a_freq_j supports various methods for the risk difference
column.<a class="anchor" aria-label="anchor" href="#a_freq_j-supports-various-methods-for-the-risk-difference-column-"></a>
</h3>
<p>One of the statistical options to control with the usage of
<code>a_freq_j</code> is the method for the risk difference calculation
for the risk difference columns. All methods available in
´tern::estimate_proportion_diff´ can be supported. Eg, switching to
<code>waldcc</code>, or others can be done. There is no option to switch
methods using tern <code>count_occurrences</code> layouts, only
<code>wald</code> method is available.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">extra_args_rr</span><span class="op">[[</span><span class="st">"method"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"waldcc"</span></span>
<span></span>
<span><span class="va">tbl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span></span>
<span>  top_level_section_div <span class="op">=</span> <span class="st">" "</span>,</span>
<span>  colcount_format <span class="op">=</span> <span class="st">"N=xx"</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## main columns</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"colspan_trt"</span>, split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/trim_levels_to_map.html" class="external-link">trim_levels_to_map</a></span><span class="op">(</span>map <span class="op">=</span> <span class="va">colspan_trt_map</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>, show_colcounts <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## risk diff columns, note nested = FALSE</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"rrisk_header"</span>, nested <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>, labels_var <span class="op">=</span> <span class="st">"rrisk_label"</span>, split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">remove_split_levels</a></span><span class="op">(</span><span class="va">ctrl_grp</span><span class="op">)</span>,</span>
<span>    show_colcounts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>,</span>
<span>    split_label <span class="op">=</span> <span class="st">"System Organ Class"</span>,</span>
<span>    split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">trim_levels_in_group</a></span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span>,</span>
<span>    label_pos <span class="op">=</span> <span class="st">"topleft"</span>,</span>
<span>    section_div <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">)</span>,</span>
<span>    nested <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>, cfun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"AEDECOD"</span>, afun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">adae</span>, alt_counts_df <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl2</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;                          Active Study Agent                                                                           </span></span>
<span><span class="co">#&gt;                      A: Drug X    C: Combination   B: Placebo                Risk Difference (%) (95% CI)             </span></span>
<span><span class="co">#&gt; System Organ Class     N=134          N=132          N=134      A: Drug X vs B: Placebo   C: Combination vs B: Placebo</span></span>
<span><span class="co">#&gt; ——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; cl A.1               78 (58.2%)     89 (67.4%)     75 (56.0%)      2.2 (-10.4, 14.8)           11.5 (-0.9, 23.8)      </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.1      50 (37.3%)     63 (47.7%)     45 (33.6%)      3.7 (-8.5, 15.9)             14.1 (1.7, 26.6)      </span></span>
<span><span class="co">#&gt;   dcd A.1.1.1.2      48 (35.8%)     50 (37.9%)     48 (35.8%)      0.0 (-12.2, 12.2)           2.1 (-10.3, 14.4)      </span></span>
<span><span class="co">#&gt;                                                                                                                       </span></span>
<span><span class="co">#&gt; cl B.1               47 (35.1%)     43 (32.6%)     49 (36.6%)     -1.5 (-13.7, 10.7)           -4.0 (-16.2, 8.2)      </span></span>
<span><span class="co">#&gt;   dcd B.1.1.1.1      47 (35.1%)     43 (32.6%)     49 (36.6%)     -1.5 (-13.7, 10.7)           -4.0 (-16.2, 8.2)      </span></span>
<span><span class="co">#&gt;                                                                                                                       </span></span>
<span><span class="co">#&gt; cl B.2               79 (59.0%)     85 (64.4%)     74 (55.2%)      3.7 (-8.9, 16.3)             9.2 (-3.3, 21.7)      </span></span>
<span><span class="co">#&gt;   dcd B.2.1.2.1      49 (36.6%)     52 (39.4%)     44 (32.8%)      3.7 (-8.4, 15.9)             6.6 (-5.7, 18.8)      </span></span>
<span><span class="co">#&gt;   dcd B.2.2.3.1      48 (35.8%)     51 (38.6%)     54 (40.3%)      -4.5 (-16.8, 7.9)           -1.7 (-14.2, 10.8)     </span></span>
<span><span class="co">#&gt;                                                                                                                       </span></span>
<span><span class="co">#&gt; cl C.1               43 (32.1%)     43 (32.6%)     46 (34.3%)      -2.2 (-14.3, 9.8)           -1.8 (-13.8, 10.3)     </span></span>
<span><span class="co">#&gt;   dcd C.1.1.1.3      43 (32.1%)     43 (32.6%)     46 (34.3%)      -2.2 (-14.3, 9.8)           -1.8 (-13.8, 10.3)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creation-of-subgroup-tables-with-a_freq_j">Creation of Subgroup tables with <code>a_freq_j</code><a class="anchor" aria-label="anchor" href="#creation-of-subgroup-tables-with-a_freq_j"></a>
</h3>
<p>The junco function <code>a_freq_j</code> also supports the creation
of subgroup tables, which is demonstrated in below table.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">extra_args_rr_common</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  denom <span class="op">=</span> <span class="st">"n_altdf"</span>,</span>
<span>  denom_by <span class="op">=</span> <span class="st">"SEX"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">extra_args_rr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span></span>
<span>  <span class="va">extra_args_rr_common</span>, </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    riskdiff <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    extrablankline <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n_altdf"</span><span class="op">)</span>,</span>
<span>    label_fstr <span class="op">=</span> <span class="st">"Gender: %s"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">extra_args_rr2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span></span>
<span>  <span class="va">extra_args_rr_common</span>, </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    riskdiff <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    ref_path <span class="op">=</span> <span class="va">ref_path</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"wald"</span>,</span>
<span>    .stats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"count_unique_denom_fraction"</span><span class="op">)</span>,</span>
<span>    na_str <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"NA"</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span></span>
<span>  top_level_section_div <span class="op">=</span> <span class="st">" "</span>,</span>
<span>  colcount_format <span class="op">=</span> <span class="st">"N=xx"</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## main columns</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"colspan_trt"</span>, split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/trim_levels_to_map.html" class="external-link">trim_levels_to_map</a></span><span class="op">(</span>map <span class="op">=</span> <span class="va">colspan_trt_map</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>, show_colcounts <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## risk diff columns, note nested = FALSE</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"rrisk_header"</span>, nested <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>, labels_var <span class="op">=</span> <span class="st">"rrisk_label"</span>, split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">remove_split_levels</a></span><span class="op">(</span><span class="va">ctrl_grp</span><span class="op">)</span>,</span>
<span>    show_colcounts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"SEX"</span>, split_fun <span class="op">=</span> <span class="va">drop_split_levels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span><span class="st">"SEX"</span>, cfun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"TRTEMFL"</span>,</span>
<span>    split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">keep_split_levels</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span>,</span>
<span>    indent_mod <span class="op">=</span> <span class="op">-</span><span class="fl">1L</span>,</span>
<span>    section_div <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span><span class="st">"TRTEMFL"</span>,</span>
<span>    cfun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/append.html" class="external-link">append</a></span><span class="op">(</span><span class="va">extra_args_rr2</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>label <span class="op">=</span>  <span class="st">"Subjects with &gt;=1 AE"</span>, extrablankline <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>    </span>
<span>   <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>,</span>
<span>    split_label <span class="op">=</span> <span class="st">"System Organ Class"</span>,</span>
<span>    split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">trim_levels_in_group</a></span><span class="op">(</span><span class="st">"AEDECOD"</span><span class="op">)</span>,</span>
<span>    label_pos <span class="op">=</span> <span class="st">"topleft"</span>,</span>
<span>    section_div <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">)</span>,</span>
<span>    nested <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span><span class="st">"AEBODSYS"</span>, cfun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr2</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"AEDECOD"</span>, afun <span class="op">=</span> <span class="va">a_freq_j</span>,</span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_rr2</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">adae</span>, alt_counts_df <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span>
<span></span>
<span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl</span>, <span class="fl">30</span><span class="op">)</span></span>
<span><span class="co">#&gt;                              Active Study Agent                                                                               </span></span>
<span><span class="co">#&gt;                          A: Drug X     C: Combination    B: Placebo                  Risk Difference (%) (95% CI)             </span></span>
<span><span class="co">#&gt; System Organ Class         N=134           N=132            N=134       A: Drug X vs B: Placebo   C: Combination vs B: Placebo</span></span>
<span><span class="co">#&gt; ——————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; Gender: F                   79               66              77                                                               </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt; Subjects with &gt;=1 AE   72/79 (91.1%)   61/66 (92.4%)    73/77 (94.8%)      -3.7 (-11.7, 4.3)           -2.4 (-10.5, 5.7)      </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl A.1               53/79 (67.1%)   42/66 (63.6%)    48/77 (62.3%)      4.8 (-10.2, 19.7)           1.3 (-14.6, 17.2)      </span></span>
<span><span class="co">#&gt;     dcd A.1.1.1.1      34/79 (43.0%)   32/66 (48.5%)    30/77 (39.0%)      4.1 (-11.3, 19.5)            9.5 (-6.7, 25.8)      </span></span>
<span><span class="co">#&gt;     dcd A.1.1.1.2      32/79 (40.5%)   24/66 (36.4%)    31/77 (40.3%)      0.2 (-15.2, 15.6)           -3.9 (-19.9, 12.1)     </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl B.1               28/79 (35.4%)   21/66 (31.8%)    32/77 (41.6%)      -6.1 (-21.4, 9.1)           -9.7 (-25.5, 6.0)      </span></span>
<span><span class="co">#&gt;     dcd B.1.1.1.1      28/79 (35.4%)   21/66 (31.8%)    32/77 (41.6%)      -6.1 (-21.4, 9.1)           -9.7 (-25.5, 6.0)      </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl B.2               46/79 (58.2%)   40/66 (60.6%)    43/77 (55.8%)      2.4 (-13.1, 17.9)           4.8 (-11.4, 20.9)      </span></span>
<span><span class="co">#&gt;     dcd B.2.1.2.1      29/79 (36.7%)   19/66 (28.8%)    30/77 (39.0%)     -2.3 (-17.5, 13.0)           -10.2 (-25.6, 5.3)     </span></span>
<span><span class="co">#&gt;     dcd B.2.2.3.1      30/79 (38.0%)   24/66 (36.4%)    30/77 (39.0%)     -1.0 (-16.3, 14.3)           -2.6 (-18.5, 13.3)     </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl C.1               30/79 (38.0%)   25/66 (37.9%)    35/77 (45.5%)      -7.5 (-22.9, 8.0)           -7.6 (-23.7, 8.6)      </span></span>
<span><span class="co">#&gt;     dcd C.1.1.1.3      30/79 (38.0%)   25/66 (37.9%)    35/77 (45.5%)      -7.5 (-22.9, 8.0)           -7.6 (-23.7, 8.6)      </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl C.2               23/79 (29.1%)   28/66 (42.4%)    33/77 (42.9%)     -13.7 (-28.7, 1.2)           -0.4 (-16.7, 15.8)     </span></span>
<span><span class="co">#&gt;     dcd C.2.1.2.1      23/79 (29.1%)   28/66 (42.4%)    33/77 (42.9%)     -13.7 (-28.7, 1.2)           -0.4 (-16.7, 15.8)     </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl D.1               45/79 (57.0%)   39/66 (59.1%)    38/77 (49.4%)      7.6 (-8.0, 23.2)             9.7 (-6.6, 26.0)      </span></span>
<span><span class="co">#&gt;     dcd D.1.1.1.1      25/79 (31.6%)   26/66 (39.4%)    28/77 (36.4%)     -4.7 (-19.6, 10.1)           3.0 (-12.9, 19.0)      </span></span>
<span><span class="co">#&gt;     dcd D.1.1.4.2      30/79 (38.0%)   26/66 (39.4%)    21/77 (27.3%)      10.7 (-3.9, 25.3)           12.1 (-3.3, 27.5)      </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl D.2               26/79 (32.9%)   32/66 (48.5%)    40/77 (51.9%)     -19.0 (-34.3, -3.8)          -3.5 (-19.9, 13.0)     </span></span>
<span><span class="co">#&gt;     dcd D.2.1.5.3      26/79 (32.9%)   32/66 (48.5%)    40/77 (51.9%)     -19.0 (-34.3, -3.8)          -3.5 (-19.9, 13.0)     </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt; Gender: M                   51               60              55                                                               </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt; Subjects with &gt;=1 AE   46/51 (90.2%)   53/60 (88.3%)    48/55 (87.3%)      2.9 (-9.1, 14.9)            1.1 (-10.9, 13.0)      </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl A.1               24/51 (47.1%)   41/60 (68.3%)    25/55 (45.5%)      1.6 (-17.4, 20.6)            22.9 (5.2, 40.5)      </span></span>
<span><span class="co">#&gt;     dcd A.1.1.1.1      16/51 (31.4%)   29/60 (48.3%)    15/55 (27.3%)      4.1 (-13.2, 21.4)            21.1 (3.8, 38.3)      </span></span>
<span><span class="co">#&gt;     dcd A.1.1.1.2      15/51 (29.4%)   22/60 (36.7%)    15/55 (27.3%)      2.1 (-15.0, 19.3)            9.4 (-7.6, 26.3)      </span></span>
<span><span class="co">#&gt;                                                                                                                               </span></span>
<span><span class="co">#&gt;   cl B.1               18/51 (35.3%)   21/60 (35.0%)    16/55 (29.1%)      6.2 (-11.6, 24.0)           5.9 (-11.1, 22.9)      </span></span>
<span><span class="co">#&gt;     dcd B.1.1.1.1      18/51 (35.3%)   21/60 (35.0%)    16/55 (29.1%)      6.2 (-11.6, 24.0)           5.9 (-11.1, 22.9)</span></span></code></pre></div>
<p>This table cannot be generated using the tern
<code>count_occurrences</code> methods.</p>
</div>
</div>
<div class="section level2">
<h2 id="other-junco-features-extra-statistics-have-been-added-to-some-tern-statistical-functions">Other junco features : Extra Statistics have been added to some tern
statistical functions<a class="anchor" aria-label="anchor" href="#other-junco-features-extra-statistics-have-been-added-to-some-tern-statistical-functions"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">tern</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/default_stats_formats_labels.html" class="external-link">get_stats</a></span><span class="op">(</span><span class="st">"summarize_ancova"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "n"              "lsmean"         "lsmean_diff"    "lsmean_diff_ci"</span></span>
<span><span class="co">#&gt; [5] "pval"</span></span>
<span><span class="fu">tern</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/tern/latest-tag/reference/default_stats_formats_labels.html" class="external-link">get_stats</a></span><span class="op">(</span><span class="st">"analyze_vars_numeric"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "n"               "sum"             "mean"            "sd"             </span></span>
<span><span class="co">#&gt;  [5] "se"              "mean_sd"         "mean_se"         "mean_ci"        </span></span>
<span><span class="co">#&gt;  [9] "mean_sei"        "mean_sdi"        "mean_pval"       "median"         </span></span>
<span><span class="co">#&gt; [13] "mad"             "median_ci"       "quantiles"       "iqr"            </span></span>
<span><span class="co">#&gt; [17] "range"           "min"             "max"             "median_range"   </span></span>
<span><span class="co">#&gt; [21] "cv"              "geom_mean"       "geom_sd"         "geom_mean_sd"   </span></span>
<span><span class="co">#&gt; [25] "geom_mean_ci"    "geom_cv"         "median_ci_3d"    "mean_ci_3d"     </span></span>
<span><span class="co">#&gt; [29] "geom_mean_ci_3d"</span></span></code></pre></div>
<p>In junco, we have added extra stats for</p>
<ul>
<li>ancova: se for lsmean, combined lsmean-CI (3d stat), combined
lsmean_diff-CI (3d stat)</li>
<li>analyze_vars_numeric: combined version of mean-CI, median-CI,
geom_mean-CI (available in tern &gt;= 0.9.6)</li>
<li>similar extra stats for Kaplan-Meier/survival and other methods</li>
</ul>
</div>
<div class="section level2">
<h2 id="tabulation-examples-using-a_summarize_aval_chg_diff_j">Tabulation Examples using
<code>a_summarize_aval_chg_diff_j</code><a class="anchor" aria-label="anchor" href="#tabulation-examples-using-a_summarize_aval_chg_diff_j"></a>
</h2>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multivars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"AVAL"</span>, <span class="st">"CHG"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">extra_args_3col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  format_na_str <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span>, </span>
<span>  ref_path <span class="op">=</span> <span class="va">ref_path</span>,</span>
<span>  ancova <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  comp_btw_group <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  multivars <span class="op">=</span> <span class="va">multivars</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">lyt_vs_p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span></span>
<span>  show_colcounts <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  colcount_format <span class="op">=</span> <span class="st">"N=xx"</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">### first columns</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"colspan_trt"</span>, </span>
<span>    split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/trim_levels_to_map.html" class="external-link">trim_levels_to_map</a></span><span class="op">(</span>map <span class="op">=</span> <span class="va">colspan_trt_map</span><span class="op">)</span>, </span>
<span>    show_colcounts <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>,</span>
<span>    show_colcounts <span class="op">=</span> <span class="cn">TRUE</span>, colcount_format <span class="op">=</span> <span class="st">"N=xx"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## set up a 3 column split</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by_multivar.html" class="external-link">split_cols_by_multivar</a></span><span class="op">(</span><span class="va">multivars</span>, </span>
<span>    varlabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n/N (%)"</span>, <span class="st">"Mean (95% CI)"</span>, <span class="st">"Mean Change From Baseline (95% CI)"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"PARAM"</span>, </span>
<span>    label_pos <span class="op">=</span> <span class="st">"topleft"</span>, </span>
<span>    split_label <span class="op">=</span> <span class="st">"Parameter"</span>, </span>
<span>    section_div <span class="op">=</span> <span class="st">" "</span>, </span>
<span>    split_fun <span class="op">=</span> <span class="va">drop_split_levels</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## note the child_labels = hidden for AVISIT, these labels will be taken care off by</span></span>
<span>  <span class="co">## applying function summarize_aval_chg_diff further in the layout</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"AVISIT"</span>, </span>
<span>    label_pos <span class="op">=</span> <span class="st">"topleft"</span>, </span>
<span>    split_label <span class="op">=</span> <span class="st">"Study Visit"</span>, </span>
<span>    split_fun <span class="op">=</span> <span class="va">drop_split_levels</span>, </span>
<span>    child_labels <span class="op">=</span> <span class="st">"hidden"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">lyt_vs</span> <span class="op">&lt;-</span> <span class="va">lyt_vs_p1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co">### restart for the rrisk_header columns - note the nested = FALSE option</span></span>
<span>  <span class="co">### also note the child_labels = "hidden" in both PARAM and AVISIT</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"rrisk_header_vs"</span>, nested <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="va">trtvar</span>,</span>
<span>    split_fun <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_funcs.html" class="external-link">remove_split_levels</a></span><span class="op">(</span><span class="va">ctrl_grp</span><span class="op">)</span>, </span>
<span>    labels_var <span class="op">=</span> <span class="st">"rrisk_label"</span>,</span>
<span>    show_colcounts <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>    colcount_format <span class="op">=</span> <span class="st">"N=xx"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">### difference columns : just 1 column &amp; analysis needs to be done on change</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by_multivar.html" class="external-link">split_cols_by_multivar</a></span><span class="op">(</span><span class="va">multivars</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>, </span>
<span>    varlabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">### the variable passed here in analyze is not used (STUDYID), it is a dummy var passing,</span></span>
<span>  <span class="co">### the function a_summarize_aval_chg_diff_j grabs the required vars from cols_by_multivar calls</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, </span>
<span>    afun <span class="op">=</span> <span class="va">a_summarize_aval_chg_diff_j</span>, </span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_3col</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">result_vs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">lyt_vs</span>, <span class="va">advs</span>, alt_counts_df <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span></code></pre></div>
<p>This is the resulting table.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result_vs</span>, <span class="fl">15</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                                                                             Active Study Agent                                                                                                                                                           Difference in Mean Change (95% CI)          </span></span>
<span><span class="co">#&gt;                                                            A: Drug X                                                                C: Combination                                                                B: Placebo                                   A: Drug X vs B: Placebo   C: Combination vs B: Placebo</span></span>
<span><span class="co">#&gt; Parameter                                                    N=134                                                                       N=132                                                                       N=134                                              N=134                       N=132            </span></span>
<span><span class="co">#&gt;   Study Visit                  n/N (%)          Mean (95% CI)     Mean Change From Baseline (95% CI)       n/N (%)          Mean (95% CI)     Mean Change From Baseline (95% CI)       n/N (%)          Mean (95% CI)     Mean Change From Baseline (95% CI)                                                         </span></span>
<span><span class="co">#&gt; —————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; Diastolic Blood Pressure                                                                                                                                                                                                                                                                                             </span></span>
<span><span class="co">#&gt;   SCREENING                134/134 (100.0%)   50.0 (48.7, 51.2)                                        132/132 (100.0%)   50.2 (48.9, 51.5)                                        134/134 (100.0%)   50.8 (49.3, 52.2)                                                                                              </span></span>
<span><span class="co">#&gt;   BASELINE                 134/134 (100.0%)   48.6 (47.2, 50.0)                                        132/132 (100.0%)   51.1 (49.8, 52.4)                                        134/134 (100.0%)   50.4 (49.1, 51.8)                                                                                              </span></span>
<span><span class="co">#&gt;   WEEK 1 DAY 8             134/134 (100.0%)   50.3 (49.0, 51.5)            1.7 (-0.2, 3.5)             132/132 (100.0%)   48.9 (47.5, 50.2)           -2.3 (-4.0, -0.5)            134/134 (100.0%)   49.7 (48.4, 51.0)            -0.8 (-2.6, 1.1)                2.4 (-0.2, 5.0)             -1.5 (-4.1, 1.1)      </span></span>
<span><span class="co">#&gt;   WEEK 2 DAY 15            134/134 (100.0%)   50.8 (49.5, 52.2)             2.2 (0.2, 4.2)             132/132 (100.0%)   50.0 (48.5, 51.4)            -1.1 (-3.1, 0.9)            134/134 (100.0%)   49.7 (48.3, 51.2)            -0.7 (-2.9, 1.4)                3.0 (0.0, 5.9)              -0.4 (-3.3, 2.5)      </span></span>
<span><span class="co">#&gt;   WEEK 3 DAY 22            134/134 (100.0%)   50.7 (49.4, 52.0)             2.1 (0.3, 4.0)             132/132 (100.0%)   49.9 (48.6, 51.3)            -1.2 (-3.0, 0.7)            134/134 (100.0%)   49.1 (47.7, 50.4)            -1.3 (-3.2, 0.5)                3.5 (0.8, 6.1)              0.2 (-2.5, 2.8)       </span></span>
<span><span class="co">#&gt;   WEEK 4 DAY 29            134/134 (100.0%)   50.1 (48.7, 51.5)            1.5 (-0.4, 3.3)             132/132 (100.0%)   49.7 (48.3, 51.1)            -1.4 (-3.3, 0.5)            134/134 (100.0%)   49.6 (48.4, 50.8)            -0.8 (-2.6, 1.0)                2.3 (-0.3, 4.9)             -0.6 (-3.2, 2.0)      </span></span>
<span><span class="co">#&gt;   WEEK 5 DAY 36            134/134 (100.0%)   50.6 (49.3, 51.9)             2.0 (0.1, 3.9)             132/132 (100.0%)   49.1 (47.8, 50.4)           -2.0 (-3.9, -0.2)            134/134 (100.0%)   48.4 (47.0, 49.7)           -2.1 (-4.1, -0.1)                4.0 (1.3, 6.8)              0.1 (-2.6, 2.8)       </span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                                                                                                                                      </span></span>
<span><span class="co">#&gt; Pulse Rate                                                                                                                                                                                                                                                                                                           </span></span>
<span><span class="co">#&gt;   SCREENING                134/134 (100.0%)   49.6 (48.1, 51.1)                                        132/132 (100.0%)   49.3 (47.8, 50.8)                                        134/134 (100.0%)   49.4 (48.0, 50.8)                                                                                              </span></span>
<span><span class="co">#&gt;   BASELINE                 134/134 (100.0%)   51.9 (50.5, 53.2)                                        132/132 (100.0%)   50.3 (48.6, 51.9)                                        134/134 (100.0%)   50.3 (48.8, 51.8)                                                                                              </span></span>
<span><span class="co">#&gt;   WEEK 1 DAY 8             134/134 (100.0%)   50.1 (48.6, 51.5)            -1.8 (-3.8, 0.2)            132/132 (100.0%)   49.8 (48.5, 51.1)            -0.5 (-2.6, 1.7)            134/134 (100.0%)   49.3 (48.0, 50.6)            -1.0 (-3.0, 1.0)               -0.8 (-3.6, 2.0)             0.5 (-2.4, 3.5)       </span></span>
<span><span class="co">#&gt;   WEEK 2 DAY 15            134/134 (100.0%)   49.7 (48.2, 51.2)            -2.2 (-4.3, 0.0)            132/132 (100.0%)   49.1 (47.7, 50.4)            -1.2 (-3.1, 0.8)            134/134 (100.0%)   50.8 (49.5, 52.1)            0.6 (-1.5, 2.6)                -2.7 (-5.6, 0.2)             -1.8 (-4.5, 1.0)      </span></span>
<span><span class="co">#&gt;   WEEK 3 DAY 22            134/134 (100.0%)   50.5 (49.2, 51.7)            -1.4 (-3.3, 0.5)            132/132 (100.0%)   49.8 (48.6, 51.0)            -0.5 (-2.5, 1.6)            134/134 (100.0%)   49.9 (48.6, 51.3)            -0.4 (-2.2, 1.5)               -1.1 (-3.7, 1.6)             -0.1 (-2.9, 2.7)      </span></span>
<span><span class="co">#&gt;   WEEK 4 DAY 29            134/134 (100.0%)   49.0 (47.5, 50.4)           -2.9 (-4.8, -1.0)            132/132 (100.0%)   51.0 (49.7, 52.3)            0.7 (-1.3, 2.7)             134/134 (100.0%)   50.0 (48.5, 51.4)            -0.3 (-2.4, 1.7)               -2.6 (-5.4, 0.2)             1.0 (-1.8, 3.9)</span></span></code></pre></div>
<p>The columns for the comparison between reference group is optional.
The same table without these extra columns can be produced by specifying
the argument <code>comp_btw_group</code> = <code>FALSE</code> and
leaving out the 3 <code>split_cols_by</code> calls</p>
<ul>
<li>split_cols_by(“rrisk_header_vs”)</li>
<li>split_cols_by(trtvar)</li>
<li>split_cols_by_multivar(multivars[3])</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multivars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AVAL"</span>, <span class="st">"AVAL"</span>, <span class="st">"CHG"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">extra_args_3col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  format_na_str <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">3</span><span class="op">)</span>, </span>
<span>  ancova <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  comp_btw_group <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  multivars <span class="op">=</span> <span class="va">multivars</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">lyt_vs2</span> <span class="op">&lt;-</span>  <span class="va">lyt_vs_p1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co">### the variable passed here in analyze is not used (STUDYID), it is a dummy var passing,</span></span>
<span>  <span class="co">### the function a_summarize_aval_chg_diff_j grabs the required vars from cols_by_multivar calls</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"STUDYID"</span>, </span>
<span>    afun <span class="op">=</span> <span class="va">a_summarize_aval_chg_diff_j</span>, </span>
<span>    extra_args <span class="op">=</span> <span class="va">extra_args_3col</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">result_vs2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">lyt_vs2</span>, <span class="va">advs</span>, alt_counts_df <span class="op">=</span> <span class="va">adsl</span><span class="op">)</span></span></code></pre></div>
<p>This is the resulting table without the difference between treatment
group columns.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result_vs2</span>, <span class="fl">15</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                                                                             Active Study Agent                                                                                                                                              </span></span>
<span><span class="co">#&gt;                                                            A: Drug X                                                                C: Combination                                                                B: Placebo                                </span></span>
<span><span class="co">#&gt; Parameter                                                    N=134                                                                       N=132                                                                       N=134                                  </span></span>
<span><span class="co">#&gt;   Study Visit                  n/N (%)          Mean (95% CI)     Mean Change From Baseline (95% CI)       n/N (%)          Mean (95% CI)     Mean Change From Baseline (95% CI)       n/N (%)          Mean (95% CI)     Mean Change From Baseline (95% CI)</span></span>
<span><span class="co">#&gt; ————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; Diastolic Blood Pressure                                                                                                                                                                                                                                    </span></span>
<span><span class="co">#&gt;   SCREENING                134/134 (100.0%)   50.0 (48.7, 51.2)                                        132/132 (100.0%)   50.2 (48.9, 51.5)                                        134/134 (100.0%)   50.8 (49.3, 52.2)                                     </span></span>
<span><span class="co">#&gt;   BASELINE                 134/134 (100.0%)   48.6 (47.2, 50.0)                                        132/132 (100.0%)   51.1 (49.8, 52.4)                                        134/134 (100.0%)   50.4 (49.1, 51.8)                                     </span></span>
<span><span class="co">#&gt;   WEEK 1 DAY 8             134/134 (100.0%)   50.3 (49.0, 51.5)            1.7 (-0.2, 3.5)             132/132 (100.0%)   48.9 (47.5, 50.2)           -2.3 (-4.0, -0.5)            134/134 (100.0%)   49.7 (48.4, 51.0)            -0.8 (-2.6, 1.1)         </span></span>
<span><span class="co">#&gt;   WEEK 2 DAY 15            134/134 (100.0%)   50.8 (49.5, 52.2)             2.2 (0.2, 4.2)             132/132 (100.0%)   50.0 (48.5, 51.4)            -1.1 (-3.1, 0.9)            134/134 (100.0%)   49.7 (48.3, 51.2)            -0.7 (-2.9, 1.4)         </span></span>
<span><span class="co">#&gt;   WEEK 3 DAY 22            134/134 (100.0%)   50.7 (49.4, 52.0)             2.1 (0.3, 4.0)             132/132 (100.0%)   49.9 (48.6, 51.3)            -1.2 (-3.0, 0.7)            134/134 (100.0%)   49.1 (47.7, 50.4)            -1.3 (-3.2, 0.5)         </span></span>
<span><span class="co">#&gt;   WEEK 4 DAY 29            134/134 (100.0%)   50.1 (48.7, 51.5)            1.5 (-0.4, 3.3)             132/132 (100.0%)   49.7 (48.3, 51.1)            -1.4 (-3.3, 0.5)            134/134 (100.0%)   49.6 (48.4, 50.8)            -0.8 (-2.6, 1.0)         </span></span>
<span><span class="co">#&gt;   WEEK 5 DAY 36            134/134 (100.0%)   50.6 (49.3, 51.9)             2.0 (0.1, 3.9)             132/132 (100.0%)   49.1 (47.8, 50.4)           -2.0 (-3.9, -0.2)            134/134 (100.0%)   48.4 (47.0, 49.7)           -2.1 (-4.1, -0.1)         </span></span>
<span><span class="co">#&gt;                                                                                                                                                                                                                                                             </span></span>
<span><span class="co">#&gt; Pulse Rate                                                                                                                                                                                                                                                  </span></span>
<span><span class="co">#&gt;   SCREENING                134/134 (100.0%)   49.6 (48.1, 51.1)                                        132/132 (100.0%)   49.3 (47.8, 50.8)                                        134/134 (100.0%)   49.4 (48.0, 50.8)                                     </span></span>
<span><span class="co">#&gt;   BASELINE                 134/134 (100.0%)   51.9 (50.5, 53.2)                                        132/132 (100.0%)   50.3 (48.6, 51.9)                                        134/134 (100.0%)   50.3 (48.8, 51.8)                                     </span></span>
<span><span class="co">#&gt;   WEEK 1 DAY 8             134/134 (100.0%)   50.1 (48.6, 51.5)            -1.8 (-3.8, 0.2)            132/132 (100.0%)   49.8 (48.5, 51.1)            -0.5 (-2.6, 1.7)            134/134 (100.0%)   49.3 (48.0, 50.6)            -1.0 (-3.0, 1.0)         </span></span>
<span><span class="co">#&gt;   WEEK 2 DAY 15            134/134 (100.0%)   49.7 (48.2, 51.2)            -2.2 (-4.3, 0.0)            132/132 (100.0%)   49.1 (47.7, 50.4)            -1.2 (-3.1, 0.8)            134/134 (100.0%)   50.8 (49.5, 52.1)            0.6 (-1.5, 2.6)          </span></span>
<span><span class="co">#&gt;   WEEK 3 DAY 22            134/134 (100.0%)   50.5 (49.2, 51.7)            -1.4 (-3.3, 0.5)            132/132 (100.0%)   49.8 (48.6, 51.0)            -0.5 (-2.5, 1.6)            134/134 (100.0%)   49.9 (48.6, 51.3)            -0.4 (-2.2, 1.5)         </span></span>
<span><span class="co">#&gt;   WEEK 4 DAY 29            134/134 (100.0%)   49.0 (47.5, 50.4)           -2.9 (-4.8, -1.0)            132/132 (100.0%)   51.0 (49.7, 52.3)            0.7 (-1.3, 2.7)             134/134 (100.0%)   50.0 (48.5, 51.4)            -0.3 (-2.4, 1.7)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriel Becker, Ilse Augustyns, Paul Jenkins, Daniel Hofstaedter, Joseph Kovach, David Munoz Tord, Daniel Sabanes Bove, Ezequiel Anokian, Renfei Mao, Mrinal Das, Johnson &amp; Johnson Innovative Medicine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
