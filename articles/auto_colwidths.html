<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>TrueType-Aware Automatic Column Widths • junco</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="TrueType-Aware Automatic Column Widths">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">junco</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/johnsonandjohnson/junco/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>TrueType-Aware Automatic Column Widths</h1>
                        <h4 data-toc-skip class="author">Gabriel
Becker</h4>
            
            <h4 data-toc-skip class="date">2025-06-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/johnsonandjohnson/junco/blob/main/vignettes/auto_colwidths.Rmd" class="external-link"><code>vignettes/auto_colwidths.Rmd</code></a></small>
      <div class="d-none name"><code>auto_colwidths.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>TrueType fonts (i.e., those where different characters have different
printed widths) complicate the calculation of column widths based on the
contents of a table or listing, particularly when combined with verbose
human readable column and-or row labels.</p>
<p><code>junco</code> provides default algorithms for calculating
appropriate column widths for both tables and listings when exporting to
RTF via <code>tt_to_tlgrtf</code>.</p>
<p>These can be invoked explicitly by calling the
<code>def_colwidths</code> function on a <code>TableTree</code> or
<code>listng_df</code> object, along with a font specification.</p>
</div>
<div class="section level2">
<h2 id="tables">Tables<a class="anchor" aria-label="anchor" href="#tables"></a>
</h2>
<p>Many tables have column labels many times longer than the data in
that column’s cells; the width of cell data tends to be bounded by the
fact it is a set of one to three numbers interspersed with punctuation,
rather than words as is the case for labels.</p>
<div class="section level3">
<h3 id="pagination-assumptions">Pagination Assumptions<a class="anchor" aria-label="anchor" href="#pagination-assumptions"></a>
</h3>
<p><code>tt_to_tlgrtf</code> allows for horizontal
<code>rtables</code>-style pagination, but does not perform vertical
pagination; each vertical strip of the table (which, mind, comes from
<em>horizontal</em> pagination) is written to a separate file. The
<code>combined_rtf</code> argument indicates whether a single combined
rtf should <em>also</em> be generated by stacking those separate
sections of the table into a single RTF (as different table
objects).</p>
</div>
<div class="section level3">
<h3 id="algorithm-and-optimality-criterion">Algorithm And Optimality Criterion<a class="anchor" aria-label="anchor" href="#algorithm-and-optimality-criterion"></a>
</h3>
<p>The column-width algorithm for tables is relatively simple. For table
columns, it calculates the widths required so that no <em>cell
values</em> will be word-wrapped. This is essentially what
<code>rtables:::propose_column_widths</code> does, with the exception
that it does so including the column labels, which we have found in
practice to be much wider than the cells. <code>def_colwidths</code>
also constrains the maximum width of the row labels to the width (in
inches) specified via <code>label_width_ins</code>, with a default of
two inches.</p>
</div>
<div class="section level3">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h3>
<p>We can see this by tables with the same structure and value contents
but varying verbosity with column and row labels.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/johnsonandjohnson/junco" class="external-link">junco</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: formatters</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'formatters'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     %||%</span></span>
<span><span class="co">#&gt; Loading required package: rtables</span></span>
<span><span class="co">#&gt; Loading required package: magrittr</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'rtables'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:utils':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     str</span></span>
<span><span class="co">#&gt; Registered S3 method overwritten by 'tern':</span></span>
<span><span class="co">#&gt;   method   from </span></span>
<span><span class="co">#&gt;   tidy.glm broom</span></span>
<span></span>
<span><span class="va">adsl2</span> <span class="op">&lt;-</span> <span class="va">ex_adsl</span></span>
<span><span class="va">adsl2</span><span class="op">$</span><span class="va">ARM2</span> <span class="op">&lt;-</span> <span class="va">adsl2</span><span class="op">$</span><span class="va">ARM</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">adsl2</span><span class="op">$</span><span class="va">ARM2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span></span>
<span><span class="va">adsl2</span><span class="op">$</span><span class="va">ARM3</span> <span class="op">&lt;-</span> <span class="va">adsl2</span><span class="op">$</span><span class="va">ARM</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">adsl2</span><span class="op">$</span><span class="va">ARM3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Full Drug Name Of Drug X"</span>, <span class="st">"Current Best-Practice Standard Of Care"</span>, <span class="st">"The Weird Other Arm"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## col-labels unmodified (middling width)</span></span>
<span><span class="va">lyt1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"RACE"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"xx (xx.xx%)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"DCSREAS"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">lyt1</span>, <span class="va">adsl2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl1</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                    A: Drug X    B: Placebo    C: Combination</span></span>
<span><span class="co">#&gt; ————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; ASIAN                             68 (50.75%)   67 (50.00%)    73 (55.30%)  </span></span>
<span><span class="co">#&gt;   ADVERSE EVENT                        4             4              5       </span></span>
<span><span class="co">#&gt;   LACK OF EFFICACY                     5             5              2       </span></span>
<span><span class="co">#&gt;   PHYSICIAN DECISION                   2             4              4       </span></span>
<span><span class="co">#&gt;   PROTOCOL VIOLATION                   1             7              5       </span></span>
<span><span class="co">#&gt;   WITHDRAWAL BY PARENT/GUARDIAN        3             1              2</span></span>
<span></span>
<span><span class="co">## super narrow column labels</span></span>
<span><span class="va">lyt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span>, labels_var <span class="op">=</span> <span class="st">"ARM2"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"RACE"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"xx (xx.xx%)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"DCSREAS"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">lyt2</span>, <span class="va">adsl2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl2</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                        A             B             C     </span></span>
<span><span class="co">#&gt; —————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; ASIAN                             68 (50.75%)   67 (50.00%)   73 (55.30%)</span></span>
<span><span class="co">#&gt;   ADVERSE EVENT                        4             4             5     </span></span>
<span><span class="co">#&gt;   LACK OF EFFICACY                     5             5             2     </span></span>
<span><span class="co">#&gt;   PHYSICIAN DECISION                   2             4             4     </span></span>
<span><span class="co">#&gt;   PROTOCOL VIOLATION                   1             7             5     </span></span>
<span><span class="co">#&gt;   WITHDRAWAL BY PARENT/GUARDIAN        3             1             2</span></span>
<span></span>
<span><span class="co">## super wide column labels</span></span>
<span><span class="va">lyt3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/basic_table.html" class="external-link">basic_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_cols_by.html" class="external-link">split_cols_by</a></span><span class="op">(</span><span class="st">"ARM"</span>, labels_var <span class="op">=</span> <span class="st">"ARM3"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/split_rows_by.html" class="external-link">split_rows_by</a></span><span class="op">(</span><span class="st">"RACE"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/summarize_row_groups.html" class="external-link">summarize_row_groups</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"xx (xx.xx%)"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/analyze.html" class="external-link">analyze</a></span><span class="op">(</span><span class="st">"DCSREAS"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rtables/latest-release/reference/build_table.html" class="external-link">build_table</a></span><span class="op">(</span><span class="va">lyt3</span>, <span class="va">adsl2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tbl3</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                   Full Drug Name Of Drug X   Current Best-Practice Standard Of Care   The Weird Other Arm</span></span>
<span><span class="co">#&gt; —————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————</span></span>
<span><span class="co">#&gt; ASIAN                                   68 (50.75%)                       67 (50.00%)                     73 (55.30%)    </span></span>
<span><span class="co">#&gt;   ADVERSE EVENT                              4                                 4                               5         </span></span>
<span><span class="co">#&gt;   LACK OF EFFICACY                           5                                 5                               2         </span></span>
<span><span class="co">#&gt;   PHYSICIAN DECISION                         2                                 4                               4         </span></span>
<span><span class="co">#&gt;   PROTOCOL VIOLATION                         1                                 7                               5         </span></span>
<span><span class="co">#&gt;   WITHDRAWAL BY PARENT/GUARDIAN              3                                 1                               2</span></span></code></pre></div>
<p><code>rtables</code>’ default column widths (implemented via
<code><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/propose_column_widths.html" class="external-link">formatters::propose_column_widths</a></code>) takes the maximum width
required for a <em>label or value</em> for each column (and the
row-label pseudo column):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/propose_column_widths.html" class="external-link">propose_column_widths</a></span><span class="op">(</span><span class="va">tbl1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 41 11 11 14</span></span></code></pre></div>
<p>Which means that width of the third column will be slightly smaller
for <code>tbl2</code> as the column label is no longer wider than the
group summary cell values. The first and second columns remain the same
as the cell value widths were already slightly larger than the labels in
<code>tbl1</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/propose_column_widths.html" class="external-link">propose_column_widths</a></span><span class="op">(</span><span class="va">tbl2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 41 11 11 11</span></span></code></pre></div>
<p>Meanwhile, the verbose column labels in <code>tbl3</code> result in
dramatically wider column widths, as <code>propose_column_widths</code>
enforces no wrapping <strong>even within column labels</strong>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/propose_column_widths.html" class="external-link">propose_column_widths</a></span><span class="op">(</span><span class="va">tbl3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 41 24 38 19</span></span></code></pre></div>
<p>Meanwhile, <code>def_colwidths</code> gives the same widths for the 3
columns as with <code>tbl2</code> for all 3 tables:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/def_colwidths.html">def_colwidths</a></span><span class="op">(</span><span class="va">tbl1</span>, fontspec <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/font_spec.html" class="external-link">font_spec</a></span><span class="op">(</span><span class="op">)</span>, label_width_ins <span class="op">=</span> <span class="fl">2</span>, col_gap <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 30 11 11 11</span></span>
<span><span class="fu"><a href="../reference/def_colwidths.html">def_colwidths</a></span><span class="op">(</span><span class="va">tbl2</span>, fontspec <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/font_spec.html" class="external-link">font_spec</a></span><span class="op">(</span><span class="op">)</span>, label_width_ins <span class="op">=</span> <span class="fl">2</span>, col_gap <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 30 11 11 11</span></span>
<span><span class="fu"><a href="../reference/def_colwidths.html">def_colwidths</a></span><span class="op">(</span><span class="va">tbl3</span>, fontspec <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/font_spec.html" class="external-link">font_spec</a></span><span class="op">(</span><span class="op">)</span>, label_width_ins <span class="op">=</span> <span class="fl">2</span>, col_gap <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 30 11 11 11</span></span></code></pre></div>
<p>We see, however, that the label-row width has been reduced due to the
<code>label_width_ins</code> constraint, which we can vary up to the
maximum width the row labels need with no wrapping:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## bigger than 2, but not what we got from propose_column_labels</span></span>
<span><span class="fu"><a href="../reference/def_colwidths.html">def_colwidths</a></span><span class="op">(</span><span class="va">tbl1</span>, fontspec <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/font_spec.html" class="external-link">font_spec</a></span><span class="op">(</span><span class="op">)</span>, label_width_ins <span class="op">=</span> <span class="fl">2.2</span>, col_gap <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 33 11 11 11</span></span>
<span><span class="co">## bigger than required so we get same row label width as propose_column_widths</span></span>
<span><span class="fu"><a href="../reference/def_colwidths.html">def_colwidths</a></span><span class="op">(</span><span class="va">tbl1</span>, fontspec <span class="op">=</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/font_spec.html" class="external-link">font_spec</a></span><span class="op">(</span><span class="op">)</span>, label_width_ins <span class="op">=</span> <span class="fl">6</span>, col_gap <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 41 11 11 11</span></span></code></pre></div>
<p>While we have done these examples with the default monospace font
used by <code>rtables</code> and <code>formatters</code>, the difference
is often particularly large when using a TrueType font with verbose
labels, as many letters have larger print widths than punctuation and
numeric digit characters:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fspec_times</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/font_spec.html" class="external-link">font_spec</a></span><span class="op">(</span><span class="st">"Times"</span>, <span class="fl">9</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/propose_column_widths.html" class="external-link">propose_column_widths</a></span><span class="op">(</span><span class="va">tbl3</span>, fontspec <span class="op">=</span> <span class="va">fspec_times</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 93 45 65 36</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/def_colwidths.html">def_colwidths</a></span><span class="op">(</span><span class="va">tbl3</span>, fontspec <span class="op">=</span> <span class="va">fspec_times</span>, label_width_ins <span class="op">=</span> <span class="fl">2</span>, col_gap <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 64 20 20 20</span></span></code></pre></div>
<p>We note here that for our (fictional but realistically verbose)
column labels in <code>tbl3</code>, the default behavior from formatters
will not fit on a single page as even without padding between the
columns, those widths take up</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/propose_column_widths.html" class="external-link">propose_column_widths</a></span><span class="op">(</span><span class="va">tbl3</span>, fontspec <span class="op">=</span> <span class="va">fspec_times</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 239</span></span></code></pre></div>
<p>space-character widths (which is the unit <code>formatters</code>
calculates widths in) while a standard page only has</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">formatters</span><span class="fu">::</span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/page_lcpp.html" class="external-link">page_lcpp</a></span><span class="op">(</span>fontspec <span class="op">=</span> <span class="va">fspec_times</span><span class="op">)</span><span class="op">$</span><span class="va">cpp</span></span>
<span><span class="co">#&gt; [1] 224</span></span></code></pre></div>
<p>spaces of width available.</p>
<p>The column widths calculated by <code>def_colwidths</code>, however,
easily fit on a single page.</p>
</div>
</div>
<div class="section level2">
<h2 id="listings">Listings<a class="anchor" aria-label="anchor" href="#listings"></a>
</h2>
<p>Listings, unlike tables, often have text in their cell values,
sometimes even concatenations of multiple demographic variables into a
single column. They also do not have the row-labels pseudo-column
present in tables. As such, we need a different, and much more
complicated, algorithm to calculate good column widths.</p>
<div class="section level3">
<h3 id="pagination-assumptions-1">Pagination Assumptions<a class="anchor" aria-label="anchor" href="#pagination-assumptions-1"></a>
</h3>
<p><code>def_colwidths</code> assumes that listings should
<strong>not</strong> be horizontally paginated, so all columns, and any
gaps between them, must fit within the width of a single page.</p>
</div>
<div class="section level3">
<h3 id="optimality-criterion">Optimality Criterion<a class="anchor" aria-label="anchor" href="#optimality-criterion"></a>
</h3>
<p>For listings, we optimize <em>the number of total lines a listing
will require to print, including repetition of the table header</em>.
This helps control the total size of the resulting RTF file, as well as
generally providing a better reading experience for the listing.</p>
<p>We further constrain our column widths such that no words <em>within
cell values</em> will need to be broken up by word wrapping, <em>if
possible</em>. We define “words” for this purpose as a string of
characters separated by space(s) or “-”.</p>
<p>For this reason, we recommend concatenation of values into listing
column values to be split by e.g., <code>" / "</code> rather than
<code>"/"</code>, as even though that makes the value slightly longer it
gives the algorithm much more flexibility to find column widths that
don’t break up individual “words”.</p>
<p>This translates, generally to finding widths where after wrapping, a
single column isn’t wrapped many more times than others within the
majority of rows. In practice, we have found that this results in
listings that are both legible and aesthetically reasonable.</p>
</div>
<div class="section level3">
<h3 id="algorithm">Algorithm<a class="anchor" aria-label="anchor" href="#algorithm"></a>
</h3>
<p>The algorithm for selecting column widths has two parts. First, for
each column individually, all widths that would result in different
numbers of total lines for the cells in the columns are determined; the
constraint that words within cells not be broken up is key here, as it
dramatically reduces the number of widths that actually result in
different numbers of lines. The second step is to search the space of
candidate column widths collectively for the optimal set, which combines
to less than the total available space.</p>
<p>We will use the following data to illustrate:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://insightsengineering.github.io/rlistings/" class="external-link">rlistings</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: tibble</span></span>
<span></span>
<span><span class="va">adae</span> <span class="op">&lt;-</span> <span class="fu">pharmaverseadam</span><span class="fu">::</span><span class="va"><a href="https://pharmaverse.github.io/pharmaverseadam/reference/adae.html" class="external-link">adae</a></span></span>
<span><span class="va">adae</span><span class="op">$</span><span class="va">AEOUT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"/"</span>, <span class="st">" / "</span>, <span class="va">adae</span><span class="op">$</span><span class="va">AEOUT</span><span class="op">)</span></span>
<span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu">pharmaverseadam</span><span class="fu">::</span><span class="va"><a href="https://pharmaverse.github.io/pharmaverseadam/reference/adsl.html" class="external-link">adsl</a></span></span>
<span></span>
<span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="va">adsl</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span>, <span class="fu"><a href="https://generics.r-lib.org/reference/setops.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">adae</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="va">lstdat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">adae</span>, <span class="va">adsl</span>, by <span class="op">=</span> <span class="st">"USUBJID"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">lstdat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">adae</span><span class="op">)</span>, <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/var_labels.html" class="external-link">var_labels</a></span><span class="op">(</span><span class="va">adsl</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">lstdat</span><span class="op">$</span><span class="va">demog</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/with_label.html" class="external-link">with_label</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">lstdat</span><span class="op">$</span><span class="va">RACE</span>, <span class="va">lstdat</span><span class="op">$</span><span class="va">SEX</span>, <span class="va">lstdat</span><span class="op">$</span><span class="va">AGE</span>, sep <span class="op">=</span> <span class="st">" / "</span><span class="op">)</span>, <span class="st">"Demographic Information"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lsting</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/rlistings/latest-tag/reference/listings.html" class="external-link">as_listing</a></span><span class="op">(</span><span class="va">lstdat</span>,</span>
<span>  key_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USUBJID"</span><span class="op">)</span>,</span>
<span>  disp_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ACTARM"</span>, <span class="st">"COUNTRY"</span>, <span class="st">"demog"</span>, <span class="st">"AESEV"</span>, <span class="st">"AEBODSYS"</span>, <span class="st">"AEDECOD"</span>, <span class="st">"ASTDTM"</span>, <span class="st">"AENDTM"</span>, <span class="st">"AEOUT"</span>, <span class="st">"EOSSTT"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="candidate-column-widths">Candidate Column Widths<a class="anchor" aria-label="anchor" href="#candidate-column-widths"></a>
</h4>
<p>For example, the last cell in the demographics column contains the
value</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">demcell</span> <span class="op">&lt;-</span> <span class="va">lstdat</span><span class="op">$</span><span class="va">demog</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">lstdat</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">demcell</span></span>
<span><span class="co">#&gt; [1] "BLACK OR AFRICAN AMERICAN / F / 74"</span></span></code></pre></div>
<p>Broken up according to our definition, it contains the following
“words” which must remain whole during column width selection.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wrds</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">demcell</span>, <span class="st">"[ -]"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">wrds</span></span>
<span><span class="co">#&gt; [1] "BLACK"    "OR"       "AFRICAN"  "AMERICAN" "/"        "F"        "/"       </span></span>
<span><span class="co">#&gt; [8] "74"</span></span></code></pre></div>
<p>Assuming a monospace font for simplicity, then, the smallest possible
width of the column is</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">wrds</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8</span></span></code></pre></div>
<p>And using that width, the first two words fit into a line, the third
into another, the fourth in its own, and “words” five through 8 all fit
into a final line, for a total of four lines. We call this <em>packing
lines</em></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">packed_widths</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span><span class="va">lst</span>, <span class="va">paste</span>, collapse <span class="op">=</span> <span class="st">" "</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">packed_widths</span><span class="op">(</span></span>
<span>  <span class="va">wrds</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>  <span class="va">wrds</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>  <span class="va">wrds</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>,</span>
<span>  <span class="va">wrds</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8 7 8 8</span></span></code></pre></div>
<p>Recall that we do not care which words are allocated where, only the
total number of lines required, so a colwidth of 10, which would allow
the fifth word (/) to be packed into the same line as the fourth,
resulting in AMERICAN /, results in the same number of total lines, so
will not be considered a distinct possible column width with respect to
that cell.</p>
<p>The next column width that results in fewer lines for that cell is
one where words one through three are all able to be packed into a
single line, with spaces between them, 16 in this case.</p>
<p>With that column width, we get three lines as we do not have enough
room for the space required to consolidate the final two lines into
one.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">packed_widths</span><span class="op">(</span><span class="va">wrds</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="va">wrds</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>, <span class="va">wrds</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16  8  8</span></span></code></pre></div>
<p>Increasing the column width to 17, however, allows us to get down to
two lines:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">packed_widths</span><span class="op">(</span></span>
<span>  <span class="va">wrds</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>  <span class="va">wrds</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 16 17</span></span></code></pre></div>
<p>Finally, the last possible width with a different line total is the
smallest width that will fit the entire value, i.e., 34.</p>
<p>So for this cell, there are four, and only four, candidate column
widths.</p>
</div>
<div class="section level4">
<h4 id="selecting-the-optimal-set-of-widths">Selecting The Optimal Set Of Widths<a class="anchor" aria-label="anchor" href="#selecting-the-optimal-set-of-widths"></a>
</h4>
<p>Once we have the full set of candidate widths for each column
individually, the algorithm for selecting the optimal collective set is
as follows:</p>
<ol start="0" style="list-style-type: decimal">
<li>Initialize
<ol style="list-style-type: lower-alpha">
<li>Remove candidate widths which result in column labels requiring more
than allowable lines (default 3)</li>
<li>Initialize with smallest candidate width for each column</li>
</ol>
</li>
<li>Determine column which requires the largest total lines</li>
<li>Check if total space allows for changing to next candidate width for
that column
<ol style="list-style-type: lower-alpha">
<li>If it does, select that column width and goto step (1)</li>
<li>otherwise, end search and spread any remaining available space
equally among columns</li>
</ol>
</li>
</ol>
<p>We are able to end the search at step (2b) because even if another
column has a candidate width available that would require less lines,
the total lines for the document are determined solely by the column
which requires the most lines, so changing it as such won’t affect the
outcome.</p>
</div>
</div>
<div class="section level3">
<h3 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<p><code>def_colwidths</code> calls down to
<code>listing_column_widths</code> with default values when passed a
<code>listing_df</code> object. We will call the latter directly here
for explicitness, and to make the column widths more directly comparable
via <code>export_as_txt</code> output.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fspec_times8</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/font_spec.html" class="external-link">font_spec</a></span><span class="op">(</span><span class="st">"Times"</span>, <span class="fl">8</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">cw</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/def_colwidths.html">listing_column_widths</a></span><span class="op">(</span><span class="va">lsting</span>, col_gap <span class="op">=</span> <span class="fl">0</span>, fontspec <span class="op">=</span> <span class="va">fspec_times8</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; Optimizng Column Widths</span></span>
<span><span class="co">#&gt; Initial lines required: 3979</span></span>
<span><span class="co">#&gt; Available adjustment: 33 spaces</span></span>
<span><span class="co">#&gt; COL 10 width: 26-&gt;51 lines req: 3825-&gt;1914</span></span>
<span><span class="co">#&gt; COL 6 width: 40-&gt;48 lines req: 3415-&gt;2974</span></span>
<span></span>
<span><span class="va">txt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/export_as_txt.html" class="external-link">export_as_txt</a></span><span class="op">(</span><span class="va">lsting</span>,</span>
<span>  pg_width <span class="op">=</span> <span class="fu"><a href="../reference/inches_to_spaces.html">inches_to_spaces</a></span><span class="op">(</span><span class="fl">8.88</span>, fontspec <span class="op">=</span> <span class="va">fspec_times8</span><span class="op">)</span>,</span>
<span>  lpp <span class="op">=</span> <span class="cn">NULL</span>, colwidths <span class="op">=</span> <span class="va">cw</span>,</span>
<span>  fontspec <span class="op">=</span> <span class="va">fspec_times8</span>, col_gap <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">txt2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">txt</span>, <span class="st">"\n"</span>, fixed <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">txt2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Unique Subject    Description of                                                                                                                                                                              Analysis Start    Analysis End                                                                                    "</span></span>
<span><span class="co">#&gt; [2] "  Identifier        Actual Arm        Country    Demographic Information      Severity/Intensity                 Body System or Organ Class                           Dictionary-Derived Term                    Date/Time        Date/Time                 Outcome of Adverse Event                   End of Study Status      "</span></span>
<span><span class="co">#&gt; [3] "————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————"</span></span>
<span><span class="co">#&gt; [4] "  01-701-1015        Placebo            USA           WHITE / F / 63                 MILD                GENERAL DISORDERS AND ADMINISTRATION SITE                   APPLICATION SITE ERYTHEMA                  2014-01-03           NA                   NOT RECOVERED / NOT RESOLVED                      COMPLETED           "</span></span>
<span><span class="co">#&gt; [5] "                                                                                                                         CONDITIONS                                                                                                                                                                                             "</span></span>
<span><span class="co">#&gt; [6] "                     Placebo            USA           WHITE / F / 63                 MILD                GENERAL DISORDERS AND ADMINISTRATION SITE                   APPLICATION SITE PRURITUS                  2014-01-03           NA                   NOT RECOVERED / NOT RESOLVED                      COMPLETED           "</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">txt2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2096</span></span></code></pre></div>
<p>Versus giving each column an equal portion of the width (admittedly
an ill-conceived strategy)</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">txtbad</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://insightsengineering.github.io/formatters/latest-tag/reference/export_as_txt.html" class="external-link">export_as_txt</a></span><span class="op">(</span><span class="va">lsting</span>,</span>
<span>  pg_width <span class="op">=</span> <span class="fu"><a href="../reference/inches_to_spaces.html">inches_to_spaces</a></span><span class="op">(</span><span class="fl">8.88</span>, fontspec <span class="op">=</span> <span class="va">fspec_times8</span><span class="op">)</span>,</span>
<span>  lpp <span class="op">=</span> <span class="cn">NULL</span>, colwidths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fl">320</span> <span class="op">/</span> <span class="fl">11</span><span class="op">)</span>, <span class="fl">11</span><span class="op">)</span>,</span>
<span>  fontspec <span class="op">=</span> <span class="va">fspec_times8</span>, col_gap <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span>
<span><span class="va">txt2bad</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="va">txtbad</span>, <span class="st">"\n"</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">txt2bad</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "  Unique Subject Identifier    Description of Actual Arm             Country              Demographic Information        Severity/Intensity       Body System or Organ Class     Dictionary-Derived Term     Analysis Start Date/Time      Analysis End Date/Time      Outcome of Adverse Event        End of Study Status     "</span></span>
<span><span class="co">#&gt; [2] "———————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————"</span></span>
<span><span class="co">#&gt; [3] "         01-701-1015                    Placebo                        USA                    WHITE / F / 63                    MILD                 GENERAL DISORDERS AND      APPLICATION SITE ERYTHEMA           2014-01-03                       NA              NOT RECOVERED / NOT RESOLVED           COMPLETED          "</span></span>
<span><span class="co">#&gt; [4] "                                                                                                                                                      ADMINISTRATION SITE                                                                                                                                                      "</span></span>
<span><span class="co">#&gt; [5] "                                                                                                                                                          CONDITIONS                                                                                                                                                           "</span></span>
<span><span class="co">#&gt; [6] "                                        Placebo                        USA                    WHITE / F / 63                    MILD                 GENERAL DISORDERS AND      APPLICATION SITE PRURITUS           2014-01-03                       NA              NOT RECOVERED / NOT RESOLVED           COMPLETED          "</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">txt2bad</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 2306</span></span></code></pre></div>
<p>So we see that our algorithm saved 9.11 percent of the total lines
required by (a set of) naive column widths in this instance.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gabriel Becker, Ilse Augustyns, Paul Jenkins, Daniel Hofstaedter, Joseph Kovach, David Munoz Tord, Daniel Sabanes Bove, Ezequiel Anokian, Renfei Mao, Mrinal Das, Johnson &amp; Johnson Innovative Medicine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
